// Autogenerated from E1AP-PDU-Descriptions.asn
#![allow(clippy::all)]
use super::pdu::*;
use crate::common::Criticality;
use anyhow::Result;
use asn1_per::{aper::*, *};
use async_trait::async_trait;
use slog::Logger;

// E1apPdu
#[derive(Clone, Debug)]
pub enum E1apPdu {
    InitiatingMessage(InitiatingMessage),
    SuccessfulOutcome(SuccessfulOutcome),
    UnsuccessfulOutcome(UnsuccessfulOutcome),
}

impl E1apPdu {
    fn decode_inner(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        let (idx, extended) = decode::decode_choice_idx(data, 0, 2, true)?;
        if extended {
            return Err(PerCodecError::new("CHOICE additions not implemented"));
        }
        match idx {
            0 => Ok(Self::InitiatingMessage(InitiatingMessage::decode(data)?)),
            1 => Ok(Self::SuccessfulOutcome(SuccessfulOutcome::decode(data)?)),
            2 => Ok(Self::UnsuccessfulOutcome(UnsuccessfulOutcome::decode(
                data,
            )?)),
            _ => Err(PerCodecError::new("Unknown choice idx")),
        }
    }
    fn encode_inner(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        match self {
            Self::InitiatingMessage(x) => {
                encode::encode_choice_idx(data, 0, 2, true, 0, false)?;
                x.encode(data)
            }
            Self::SuccessfulOutcome(x) => {
                encode::encode_choice_idx(data, 0, 2, true, 1, false)?;
                x.encode(data)
            }
            Self::UnsuccessfulOutcome(x) => {
                encode::encode_choice_idx(data, 0, 2, true, 2, false)?;
                x.encode(data)
            }
        }
    }
}

impl PerCodec for E1apPdu {
    type Allocator = Allocator;
    fn decode(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        E1apPdu::decode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("E1apPdu");
            e
        })
    }
    fn encode(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        self.encode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("E1apPdu");
            e
        })
    }
}
pub struct ResetProcedure {}

#[async_trait]
impl Procedure for ResetProcedure {
    type TopPdu = E1apPdu;
    type Request = Reset;
    type Success = ResetAcknowledge;
    type Failure = ();
    const CODE: u8 = 0;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: Reset,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<ResetProcedure>>::request(provider, req, logger).await {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::ResetAcknowledge(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::Reset(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::ResetAcknowledge(x)) => Ok(x),

            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct ErrorIndicationProcedure {}

#[async_trait]
impl Indication for ErrorIndicationProcedure {
    type TopPdu = E1apPdu;
    type Request = ErrorIndication;
    const CODE: u8 = 1;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: ErrorIndication,
        logger: &Logger,
    ) {
        <T as IndicationHandler<ErrorIndicationProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::ErrorIndication(r)).into_bytes()
    }
}

pub struct GnbCuUpE1SetupProcedure {}

#[async_trait]
impl Procedure for GnbCuUpE1SetupProcedure {
    type TopPdu = E1apPdu;
    type Request = GnbCuUpE1SetupRequest;
    type Success = GnbCuUpE1SetupResponse;
    type Failure = GnbCuUpE1SetupFailure;
    const CODE: u8 = 3;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: GnbCuUpE1SetupRequest,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<GnbCuUpE1SetupProcedure>>::request(provider, req, logger).await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::GnbCuUpE1SetupResponse(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::GnbCuUpE1SetupRequest(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::GnbCuUpE1SetupResponse(x)) => Ok(x),
            E1apPdu::UnsuccessfulOutcome(UnsuccessfulOutcome::GnbCuUpE1SetupFailure(x)) => {
                Err(RequestError::UnsuccessfulOutcome(x))
            }
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct GnbCuCpE1SetupProcedure {}

#[async_trait]
impl Procedure for GnbCuCpE1SetupProcedure {
    type TopPdu = E1apPdu;
    type Request = GnbCuCpE1SetupRequest;
    type Success = GnbCuCpE1SetupResponse;
    type Failure = GnbCuCpE1SetupFailure;
    const CODE: u8 = 4;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: GnbCuCpE1SetupRequest,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<GnbCuCpE1SetupProcedure>>::request(provider, req, logger).await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::GnbCuCpE1SetupResponse(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::GnbCuCpE1SetupRequest(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::GnbCuCpE1SetupResponse(x)) => Ok(x),
            E1apPdu::UnsuccessfulOutcome(UnsuccessfulOutcome::GnbCuCpE1SetupFailure(x)) => {
                Err(RequestError::UnsuccessfulOutcome(x))
            }
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct GnbCuUpConfigurationUpdateProcedure {}

#[async_trait]
impl Procedure for GnbCuUpConfigurationUpdateProcedure {
    type TopPdu = E1apPdu;
    type Request = GnbCuUpConfigurationUpdate;
    type Success = GnbCuUpConfigurationUpdateAcknowledge;
    type Failure = GnbCuUpConfigurationUpdateFailure;
    const CODE: u8 = 5;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: GnbCuUpConfigurationUpdate,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<GnbCuUpConfigurationUpdateProcedure>>::request(
            provider, req, logger,
        )
        .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(
                    SuccessfulOutcome::GnbCuUpConfigurationUpdateAcknowledge(r),
                ),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::GnbCuUpConfigurationUpdate(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(
                SuccessfulOutcome::GnbCuUpConfigurationUpdateAcknowledge(x),
            ) => Ok(x),
            E1apPdu::UnsuccessfulOutcome(
                UnsuccessfulOutcome::GnbCuUpConfigurationUpdateFailure(x),
            ) => Err(RequestError::UnsuccessfulOutcome(x)),
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct GnbCuCpConfigurationUpdateProcedure {}

#[async_trait]
impl Procedure for GnbCuCpConfigurationUpdateProcedure {
    type TopPdu = E1apPdu;
    type Request = GnbCuCpConfigurationUpdate;
    type Success = GnbCuCpConfigurationUpdateAcknowledge;
    type Failure = GnbCuCpConfigurationUpdateFailure;
    const CODE: u8 = 6;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: GnbCuCpConfigurationUpdate,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<GnbCuCpConfigurationUpdateProcedure>>::request(
            provider, req, logger,
        )
        .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(
                    SuccessfulOutcome::GnbCuCpConfigurationUpdateAcknowledge(r),
                ),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::GnbCuCpConfigurationUpdate(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(
                SuccessfulOutcome::GnbCuCpConfigurationUpdateAcknowledge(x),
            ) => Ok(x),
            E1apPdu::UnsuccessfulOutcome(
                UnsuccessfulOutcome::GnbCuCpConfigurationUpdateFailure(x),
            ) => Err(RequestError::UnsuccessfulOutcome(x)),
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct E1ReleaseProcedure {}

#[async_trait]
impl Procedure for E1ReleaseProcedure {
    type TopPdu = E1apPdu;
    type Request = E1ReleaseRequest;
    type Success = E1ReleaseResponse;
    type Failure = ();
    const CODE: u8 = 7;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: E1ReleaseRequest,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<E1ReleaseProcedure>>::request(provider, req, logger).await {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::E1ReleaseResponse(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::E1ReleaseRequest(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::E1ReleaseResponse(x)) => Ok(x),

            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct BearerContextSetupProcedure {}

#[async_trait]
impl Procedure for BearerContextSetupProcedure {
    type TopPdu = E1apPdu;
    type Request = BearerContextSetupRequest;
    type Success = BearerContextSetupResponse;
    type Failure = BearerContextSetupFailure;
    const CODE: u8 = 8;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: BearerContextSetupRequest,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<BearerContextSetupProcedure>>::request(provider, req, logger)
            .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextSetupResponse(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::BearerContextSetupRequest(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextSetupResponse(x)) => Ok(x),
            E1apPdu::UnsuccessfulOutcome(UnsuccessfulOutcome::BearerContextSetupFailure(x)) => {
                Err(RequestError::UnsuccessfulOutcome(x))
            }
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct BearerContextModificationProcedure {}

#[async_trait]
impl Procedure for BearerContextModificationProcedure {
    type TopPdu = E1apPdu;
    type Request = BearerContextModificationRequest;
    type Success = BearerContextModificationResponse;
    type Failure = BearerContextModificationFailure;
    const CODE: u8 = 9;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: BearerContextModificationRequest,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<BearerContextModificationProcedure>>::request(
            provider, req, logger,
        )
        .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextModificationResponse(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::BearerContextModificationRequest(r))
            .into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextModificationResponse(x)) => {
                Ok(x)
            }
            E1apPdu::UnsuccessfulOutcome(
                UnsuccessfulOutcome::BearerContextModificationFailure(x),
            ) => Err(RequestError::UnsuccessfulOutcome(x)),
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct BearerContextModificationRequiredProcedure {}

#[async_trait]
impl Procedure for BearerContextModificationRequiredProcedure {
    type TopPdu = E1apPdu;
    type Request = BearerContextModificationRequired;
    type Success = BearerContextModificationConfirm;
    type Failure = ();
    const CODE: u8 = 10;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: BearerContextModificationRequired,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<BearerContextModificationRequiredProcedure>>::request(
            provider, req, logger,
        )
        .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextModificationConfirm(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::BearerContextModificationRequired(r))
            .into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextModificationConfirm(x)) => {
                Ok(x)
            }

            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct BearerContextReleaseProcedure {}

#[async_trait]
impl Procedure for BearerContextReleaseProcedure {
    type TopPdu = E1apPdu;
    type Request = BearerContextReleaseCommand;
    type Success = BearerContextReleaseComplete;
    type Failure = ();
    const CODE: u8 = 11;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: BearerContextReleaseCommand,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<BearerContextReleaseProcedure>>::request(provider, req, logger)
            .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextReleaseComplete(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::BearerContextReleaseCommand(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::BearerContextReleaseComplete(x)) => Ok(x),

            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct BearerContextReleaseRequestProcedure {}

#[async_trait]
impl Indication for BearerContextReleaseRequestProcedure {
    type TopPdu = E1apPdu;
    type Request = BearerContextReleaseRequest;
    const CODE: u8 = 12;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: BearerContextReleaseRequest,
        logger: &Logger,
    ) {
        <T as IndicationHandler<BearerContextReleaseRequestProcedure>>::handle(
            provider, req, logger,
        )
        .await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::BearerContextReleaseRequest(r)).into_bytes()
    }
}

pub struct BearerContextInactivityNotificationProcedure {}

#[async_trait]
impl Indication for BearerContextInactivityNotificationProcedure {
    type TopPdu = E1apPdu;
    type Request = BearerContextInactivityNotification;
    const CODE: u8 = 13;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: BearerContextInactivityNotification,
        logger: &Logger,
    ) {
        <T as IndicationHandler<BearerContextInactivityNotificationProcedure>>::handle(
            provider, req, logger,
        )
        .await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::BearerContextInactivityNotification(r))
            .into_bytes()
    }
}

pub struct DlDataNotificationProcedure {}

#[async_trait]
impl Indication for DlDataNotificationProcedure {
    type TopPdu = E1apPdu;
    type Request = DlDataNotification;
    const CODE: u8 = 14;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: DlDataNotification,
        logger: &Logger,
    ) {
        <T as IndicationHandler<DlDataNotificationProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::DlDataNotification(r)).into_bytes()
    }
}

pub struct UlDataNotificationProcedure {}

#[async_trait]
impl Indication for UlDataNotificationProcedure {
    type TopPdu = E1apPdu;
    type Request = UlDataNotification;
    const CODE: u8 = 18;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: UlDataNotification,
        logger: &Logger,
    ) {
        <T as IndicationHandler<UlDataNotificationProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::UlDataNotification(r)).into_bytes()
    }
}

pub struct DataUsageReportProcedure {}

#[async_trait]
impl Indication for DataUsageReportProcedure {
    type TopPdu = E1apPdu;
    type Request = DataUsageReport;
    const CODE: u8 = 15;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: DataUsageReport,
        logger: &Logger,
    ) {
        <T as IndicationHandler<DataUsageReportProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::DataUsageReport(r)).into_bytes()
    }
}

pub struct GnbCuUpCounterCheckProcedure {}

#[async_trait]
impl Indication for GnbCuUpCounterCheckProcedure {
    type TopPdu = E1apPdu;
    type Request = GnbCuUpCounterCheckRequest;
    const CODE: u8 = 16;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: GnbCuUpCounterCheckRequest,
        logger: &Logger,
    ) {
        <T as IndicationHandler<GnbCuUpCounterCheckProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::GnbCuUpCounterCheckRequest(r)).into_bytes()
    }
}

pub struct GnbCuUpStatusIndicationProcedure {}

#[async_trait]
impl Indication for GnbCuUpStatusIndicationProcedure {
    type TopPdu = E1apPdu;
    type Request = GnbCuUpStatusIndication;
    const CODE: u8 = 17;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: GnbCuUpStatusIndication,
        logger: &Logger,
    ) {
        <T as IndicationHandler<GnbCuUpStatusIndicationProcedure>>::handle(provider, req, logger)
            .await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::GnbCuUpStatusIndication(r)).into_bytes()
    }
}

pub struct GnbCuCpMeasurementResultsInformationProcedure {}

#[async_trait]
impl Indication for GnbCuCpMeasurementResultsInformationProcedure {
    type TopPdu = E1apPdu;
    type Request = GnbCuCpMeasurementResultsInformation;
    const CODE: u8 = 27;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: GnbCuCpMeasurementResultsInformation,
        logger: &Logger,
    ) {
        <T as IndicationHandler<GnbCuCpMeasurementResultsInformationProcedure>>::handle(
            provider, req, logger,
        )
        .await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::GnbCuCpMeasurementResultsInformation(r))
            .into_bytes()
    }
}

pub struct MrdcDataUsageReportProcedure {}

#[async_trait]
impl Indication for MrdcDataUsageReportProcedure {
    type TopPdu = E1apPdu;
    type Request = MrdcDataUsageReport;
    const CODE: u8 = 19;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: MrdcDataUsageReport,
        logger: &Logger,
    ) {
        <T as IndicationHandler<MrdcDataUsageReportProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::MrdcDataUsageReport(r)).into_bytes()
    }
}

pub struct DeactivateTraceProcedure {}

#[async_trait]
impl Indication for DeactivateTraceProcedure {
    type TopPdu = E1apPdu;
    type Request = DeactivateTrace;
    const CODE: u8 = 21;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: DeactivateTrace,
        logger: &Logger,
    ) {
        <T as IndicationHandler<DeactivateTraceProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::DeactivateTrace(r)).into_bytes()
    }
}

pub struct TraceStartProcedure {}

#[async_trait]
impl Indication for TraceStartProcedure {
    type TopPdu = E1apPdu;
    type Request = TraceStart;
    const CODE: u8 = 20;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: TraceStart,
        logger: &Logger,
    ) {
        <T as IndicationHandler<TraceStartProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::TraceStart(r)).into_bytes()
    }
}

pub struct ResourceStatusReportingInitiationProcedure {}

#[async_trait]
impl Procedure for ResourceStatusReportingInitiationProcedure {
    type TopPdu = E1apPdu;
    type Request = ResourceStatusRequest;
    type Success = ResourceStatusResponse;
    type Failure = ResourceStatusFailure;
    const CODE: u8 = 22;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: ResourceStatusRequest,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<ResourceStatusReportingInitiationProcedure>>::request(
            provider, req, logger,
        )
        .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::ResourceStatusResponse(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::ResourceStatusRequest(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::ResourceStatusResponse(x)) => Ok(x),
            E1apPdu::UnsuccessfulOutcome(UnsuccessfulOutcome::ResourceStatusFailure(x)) => {
                Err(RequestError::UnsuccessfulOutcome(x))
            }
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct ResourceStatusReportingProcedure {}

#[async_trait]
impl Indication for ResourceStatusReportingProcedure {
    type TopPdu = E1apPdu;
    type Request = ResourceStatusUpdate;
    const CODE: u8 = 23;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: ResourceStatusUpdate,
        logger: &Logger,
    ) {
        <T as IndicationHandler<ResourceStatusReportingProcedure>>::handle(provider, req, logger)
            .await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::ResourceStatusUpdate(r)).into_bytes()
    }
}

pub struct IabUpTnlAddressUpdateProcedure {}

#[async_trait]
impl Procedure for IabUpTnlAddressUpdateProcedure {
    type TopPdu = E1apPdu;
    type Request = IabUpTnlAddressUpdate;
    type Success = IabUpTnlAddressUpdateAcknowledge;
    type Failure = IabUpTnlAddressUpdateFailure;
    const CODE: u8 = 24;

    async fn call_provider<T: RequestProvider<Self>>(
        provider: &T,
        req: IabUpTnlAddressUpdate,
        logger: &Logger,
    ) -> Option<ResponseAction<E1apPdu>> {
        match <T as RequestProvider<IabUpTnlAddressUpdateProcedure>>::request(provider, req, logger)
            .await
        {
            Ok((r, f)) => Some((
                E1apPdu::SuccessfulOutcome(SuccessfulOutcome::IabUpTnlAddressUpdateAcknowledge(r)),
                f,
            )),
            Err(_) => todo!(),
        }
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::IabUpTnlAddressUpdate(r)).into_bytes()
    }

    fn decode_response(bytes: &[u8]) -> Result<Self::Success, RequestError<Self::Failure>> {
        let response_pdu = Self::TopPdu::from_bytes(bytes)?;
        match response_pdu {
            E1apPdu::SuccessfulOutcome(SuccessfulOutcome::IabUpTnlAddressUpdateAcknowledge(x)) => {
                Ok(x)
            }
            E1apPdu::UnsuccessfulOutcome(UnsuccessfulOutcome::IabUpTnlAddressUpdateFailure(x)) => {
                Err(RequestError::UnsuccessfulOutcome(x))
            }
            _ => Err(RequestError::Other("Unexpected pdu contents".to_string())),
        }
    }
}

pub struct CellTrafficTraceProcedure {}

#[async_trait]
impl Indication for CellTrafficTraceProcedure {
    type TopPdu = E1apPdu;
    type Request = CellTrafficTrace;
    const CODE: u8 = 25;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: CellTrafficTrace,
        logger: &Logger,
    ) {
        <T as IndicationHandler<CellTrafficTraceProcedure>>::handle(provider, req, logger).await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::CellTrafficTrace(r)).into_bytes()
    }
}

pub struct EarlyForwardingSnTransferProcedure {}

#[async_trait]
impl Indication for EarlyForwardingSnTransferProcedure {
    type TopPdu = E1apPdu;
    type Request = EarlyForwardingSnTransfer;
    const CODE: u8 = 26;

    async fn call_provider<T: IndicationHandler<Self>>(
        provider: &T,
        req: EarlyForwardingSnTransfer,
        logger: &Logger,
    ) {
        <T as IndicationHandler<EarlyForwardingSnTransferProcedure>>::handle(provider, req, logger)
            .await;
    }

    fn encode_request(r: Self::Request) -> Result<Vec<u8>, PerCodecError> {
        E1apPdu::InitiatingMessage(InitiatingMessage::EarlyForwardingSnTransfer(r)).into_bytes()
    }
}

#[derive(Clone, Debug)]
pub enum InitiatingMessage {
    Reset(Reset),
    ErrorIndication(ErrorIndication),
    GnbCuUpE1SetupRequest(GnbCuUpE1SetupRequest),
    GnbCuCpE1SetupRequest(GnbCuCpE1SetupRequest),
    GnbCuUpConfigurationUpdate(GnbCuUpConfigurationUpdate),
    GnbCuCpConfigurationUpdate(GnbCuCpConfigurationUpdate),
    E1ReleaseRequest(E1ReleaseRequest),
    BearerContextSetupRequest(BearerContextSetupRequest),
    BearerContextModificationRequest(BearerContextModificationRequest),
    BearerContextModificationRequired(BearerContextModificationRequired),
    BearerContextReleaseCommand(BearerContextReleaseCommand),
    BearerContextReleaseRequest(BearerContextReleaseRequest),
    BearerContextInactivityNotification(BearerContextInactivityNotification),
    DlDataNotification(DlDataNotification),
    UlDataNotification(UlDataNotification),
    DataUsageReport(DataUsageReport),
    GnbCuUpCounterCheckRequest(GnbCuUpCounterCheckRequest),
    GnbCuUpStatusIndication(GnbCuUpStatusIndication),
    GnbCuCpMeasurementResultsInformation(GnbCuCpMeasurementResultsInformation),
    MrdcDataUsageReport(MrdcDataUsageReport),
    DeactivateTrace(DeactivateTrace),
    TraceStart(TraceStart),
    ResourceStatusRequest(ResourceStatusRequest),
    ResourceStatusUpdate(ResourceStatusUpdate),
    IabUpTnlAddressUpdate(IabUpTnlAddressUpdate),
    CellTrafficTrace(CellTrafficTrace),
    EarlyForwardingSnTransfer(EarlyForwardingSnTransfer),
}

impl InitiatingMessage {
    fn decode_inner(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        let (id, _ext) = decode::decode_integer(data, Some(0), Some(255), false)?;
        let _ = Criticality::decode(data)?;
        let _ = decode::decode_length_determinent(data, None, None, false)?;
        match id {
            0 => Ok(Self::Reset(Reset::decode(data)?)),
            1 => Ok(Self::ErrorIndication(ErrorIndication::decode(data)?)),
            3 => Ok(Self::GnbCuUpE1SetupRequest(GnbCuUpE1SetupRequest::decode(
                data,
            )?)),
            4 => Ok(Self::GnbCuCpE1SetupRequest(GnbCuCpE1SetupRequest::decode(
                data,
            )?)),
            5 => Ok(Self::GnbCuUpConfigurationUpdate(
                GnbCuUpConfigurationUpdate::decode(data)?,
            )),
            6 => Ok(Self::GnbCuCpConfigurationUpdate(
                GnbCuCpConfigurationUpdate::decode(data)?,
            )),
            7 => Ok(Self::E1ReleaseRequest(E1ReleaseRequest::decode(data)?)),
            8 => Ok(Self::BearerContextSetupRequest(
                BearerContextSetupRequest::decode(data)?,
            )),
            9 => Ok(Self::BearerContextModificationRequest(
                BearerContextModificationRequest::decode(data)?,
            )),
            10 => Ok(Self::BearerContextModificationRequired(
                BearerContextModificationRequired::decode(data)?,
            )),
            11 => Ok(Self::BearerContextReleaseCommand(
                BearerContextReleaseCommand::decode(data)?,
            )),
            12 => Ok(Self::BearerContextReleaseRequest(
                BearerContextReleaseRequest::decode(data)?,
            )),
            13 => Ok(Self::BearerContextInactivityNotification(
                BearerContextInactivityNotification::decode(data)?,
            )),
            14 => Ok(Self::DlDataNotification(DlDataNotification::decode(data)?)),
            18 => Ok(Self::UlDataNotification(UlDataNotification::decode(data)?)),
            15 => Ok(Self::DataUsageReport(DataUsageReport::decode(data)?)),
            16 => Ok(Self::GnbCuUpCounterCheckRequest(
                GnbCuUpCounterCheckRequest::decode(data)?,
            )),
            17 => Ok(Self::GnbCuUpStatusIndication(
                GnbCuUpStatusIndication::decode(data)?,
            )),
            27 => Ok(Self::GnbCuCpMeasurementResultsInformation(
                GnbCuCpMeasurementResultsInformation::decode(data)?,
            )),
            19 => Ok(Self::MrdcDataUsageReport(MrdcDataUsageReport::decode(
                data,
            )?)),
            21 => Ok(Self::DeactivateTrace(DeactivateTrace::decode(data)?)),
            20 => Ok(Self::TraceStart(TraceStart::decode(data)?)),
            22 => Ok(Self::ResourceStatusRequest(ResourceStatusRequest::decode(
                data,
            )?)),
            23 => Ok(Self::ResourceStatusUpdate(ResourceStatusUpdate::decode(
                data,
            )?)),
            24 => Ok(Self::IabUpTnlAddressUpdate(IabUpTnlAddressUpdate::decode(
                data,
            )?)),
            25 => Ok(Self::CellTrafficTrace(CellTrafficTrace::decode(data)?)),
            26 => Ok(Self::EarlyForwardingSnTransfer(
                EarlyForwardingSnTransfer::decode(data)?,
            )),
            x => {
                return Err(PerCodecError::new(format!(
                    "Unrecognised procedure code {}",
                    x
                )))
            }
        }
    }
    fn encode_inner(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        match self {
            Self::Reset(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 0, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::ErrorIndication(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 1, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuUpE1SetupRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 3, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuCpE1SetupRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 4, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuUpConfigurationUpdate(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 5, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuCpConfigurationUpdate(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 6, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::E1ReleaseRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 7, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextSetupRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 8, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextModificationRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 9, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextModificationRequired(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 10, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextReleaseCommand(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 11, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextReleaseRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 12, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextInactivityNotification(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 13, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::DlDataNotification(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 14, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::UlDataNotification(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 18, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::DataUsageReport(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 15, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuUpCounterCheckRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 16, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuUpStatusIndication(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 17, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuCpMeasurementResultsInformation(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 27, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::MrdcDataUsageReport(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 19, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::DeactivateTrace(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 21, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::TraceStart(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 20, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::ResourceStatusRequest(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 22, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::ResourceStatusUpdate(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 23, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::IabUpTnlAddressUpdate(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 24, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::CellTrafficTrace(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 25, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::EarlyForwardingSnTransfer(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 26, false)?;
                Criticality::Ignore.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
        }
        Ok(())
    }
}

impl PerCodec for InitiatingMessage {
    type Allocator = Allocator;
    fn decode(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        InitiatingMessage::decode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("InitiatingMessage");
            e
        })
    }
    fn encode(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        self.encode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("InitiatingMessage");
            e
        })
    }
}

#[derive(Clone, Debug)]
pub enum SuccessfulOutcome {
    ResetAcknowledge(ResetAcknowledge),
    GnbCuUpE1SetupResponse(GnbCuUpE1SetupResponse),
    GnbCuCpE1SetupResponse(GnbCuCpE1SetupResponse),
    GnbCuUpConfigurationUpdateAcknowledge(GnbCuUpConfigurationUpdateAcknowledge),
    GnbCuCpConfigurationUpdateAcknowledge(GnbCuCpConfigurationUpdateAcknowledge),
    E1ReleaseResponse(E1ReleaseResponse),
    BearerContextSetupResponse(BearerContextSetupResponse),
    BearerContextModificationResponse(BearerContextModificationResponse),
    BearerContextModificationConfirm(BearerContextModificationConfirm),
    BearerContextReleaseComplete(BearerContextReleaseComplete),
    ResourceStatusResponse(ResourceStatusResponse),
    IabUpTnlAddressUpdateAcknowledge(IabUpTnlAddressUpdateAcknowledge),
}

impl SuccessfulOutcome {
    fn decode_inner(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        let (id, _ext) = decode::decode_integer(data, Some(0), Some(255), false)?;
        let _ = Criticality::decode(data)?;
        let _ = decode::decode_length_determinent(data, None, None, false)?;
        match id {
            0 => Ok(Self::ResetAcknowledge(ResetAcknowledge::decode(data)?)),
            3 => Ok(Self::GnbCuUpE1SetupResponse(
                GnbCuUpE1SetupResponse::decode(data)?,
            )),
            4 => Ok(Self::GnbCuCpE1SetupResponse(
                GnbCuCpE1SetupResponse::decode(data)?,
            )),
            5 => Ok(Self::GnbCuUpConfigurationUpdateAcknowledge(
                GnbCuUpConfigurationUpdateAcknowledge::decode(data)?,
            )),
            6 => Ok(Self::GnbCuCpConfigurationUpdateAcknowledge(
                GnbCuCpConfigurationUpdateAcknowledge::decode(data)?,
            )),
            7 => Ok(Self::E1ReleaseResponse(E1ReleaseResponse::decode(data)?)),
            8 => Ok(Self::BearerContextSetupResponse(
                BearerContextSetupResponse::decode(data)?,
            )),
            9 => Ok(Self::BearerContextModificationResponse(
                BearerContextModificationResponse::decode(data)?,
            )),
            10 => Ok(Self::BearerContextModificationConfirm(
                BearerContextModificationConfirm::decode(data)?,
            )),
            11 => Ok(Self::BearerContextReleaseComplete(
                BearerContextReleaseComplete::decode(data)?,
            )),
            22 => Ok(Self::ResourceStatusResponse(
                ResourceStatusResponse::decode(data)?,
            )),
            24 => Ok(Self::IabUpTnlAddressUpdateAcknowledge(
                IabUpTnlAddressUpdateAcknowledge::decode(data)?,
            )),
            x => {
                return Err(PerCodecError::new(format!(
                    "Unrecognised procedure code {}",
                    x
                )))
            }
        }
    }
    fn encode_inner(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        match self {
            Self::ResetAcknowledge(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 0, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuUpE1SetupResponse(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 3, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuCpE1SetupResponse(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 4, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuUpConfigurationUpdateAcknowledge(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 5, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuCpConfigurationUpdateAcknowledge(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 6, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::E1ReleaseResponse(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 7, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextSetupResponse(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 8, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextModificationResponse(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 9, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextModificationConfirm(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 10, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextReleaseComplete(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 11, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::ResourceStatusResponse(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 22, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::IabUpTnlAddressUpdateAcknowledge(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 24, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
        }
        Ok(())
    }
}

impl PerCodec for SuccessfulOutcome {
    type Allocator = Allocator;
    fn decode(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        SuccessfulOutcome::decode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("SuccessfulOutcome");
            e
        })
    }
    fn encode(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        self.encode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("SuccessfulOutcome");
            e
        })
    }
}

#[derive(Clone, Debug)]
pub enum UnsuccessfulOutcome {
    GnbCuUpE1SetupFailure(GnbCuUpE1SetupFailure),
    GnbCuCpE1SetupFailure(GnbCuCpE1SetupFailure),
    GnbCuUpConfigurationUpdateFailure(GnbCuUpConfigurationUpdateFailure),
    GnbCuCpConfigurationUpdateFailure(GnbCuCpConfigurationUpdateFailure),
    BearerContextSetupFailure(BearerContextSetupFailure),
    BearerContextModificationFailure(BearerContextModificationFailure),
    ResourceStatusFailure(ResourceStatusFailure),
    IabUpTnlAddressUpdateFailure(IabUpTnlAddressUpdateFailure),
}

impl UnsuccessfulOutcome {
    fn decode_inner(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        let (id, _ext) = decode::decode_integer(data, Some(0), Some(255), false)?;
        let _ = Criticality::decode(data)?;
        let _ = decode::decode_length_determinent(data, None, None, false)?;
        match id {
            3 => Ok(Self::GnbCuUpE1SetupFailure(GnbCuUpE1SetupFailure::decode(
                data,
            )?)),
            4 => Ok(Self::GnbCuCpE1SetupFailure(GnbCuCpE1SetupFailure::decode(
                data,
            )?)),
            5 => Ok(Self::GnbCuUpConfigurationUpdateFailure(
                GnbCuUpConfigurationUpdateFailure::decode(data)?,
            )),
            6 => Ok(Self::GnbCuCpConfigurationUpdateFailure(
                GnbCuCpConfigurationUpdateFailure::decode(data)?,
            )),
            8 => Ok(Self::BearerContextSetupFailure(
                BearerContextSetupFailure::decode(data)?,
            )),
            9 => Ok(Self::BearerContextModificationFailure(
                BearerContextModificationFailure::decode(data)?,
            )),
            22 => Ok(Self::ResourceStatusFailure(ResourceStatusFailure::decode(
                data,
            )?)),
            24 => Ok(Self::IabUpTnlAddressUpdateFailure(
                IabUpTnlAddressUpdateFailure::decode(data)?,
            )),
            x => {
                return Err(PerCodecError::new(format!(
                    "Unrecognised procedure code {}",
                    x
                )))
            }
        }
    }
    fn encode_inner(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        match self {
            Self::GnbCuUpE1SetupFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 3, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuCpE1SetupFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 4, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuUpConfigurationUpdateFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 5, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::GnbCuCpConfigurationUpdateFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 6, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextSetupFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 8, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::BearerContextModificationFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 9, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::ResourceStatusFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 22, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
            Self::IabUpTnlAddressUpdateFailure(x) => {
                encode::encode_integer(data, Some(0), Some(255), false, 24, false)?;
                Criticality::Reject.encode(data)?;
                let container = &mut Allocator::new_codec_data();
                x.encode(container)?;
                encode::encode_length_determinent(
                    data,
                    None,
                    None,
                    false,
                    container.length_in_bytes(),
                )?;
                data.append_aligned(container);
            }
        }
        Ok(())
    }
}

impl PerCodec for UnsuccessfulOutcome {
    type Allocator = Allocator;
    fn decode(data: &mut PerCodecData) -> Result<Self, PerCodecError> {
        UnsuccessfulOutcome::decode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("UnsuccessfulOutcome");
            e
        })
    }
    fn encode(&self, data: &mut PerCodecData) -> Result<(), PerCodecError> {
        self.encode_inner(data).map_err(|mut e: PerCodecError| {
            e.push_context("UnsuccessfulOutcome");
            e
        })
    }
}
