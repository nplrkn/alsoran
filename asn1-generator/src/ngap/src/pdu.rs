// Copyright (c) Nicholas Larkin
// Autogenerated from NGAP-PDU-Contents.asn

use super::common::*;
use super::ies::*;
use asn1::aper::*;
#[allow(unused_imports)]
use asn1::*;
#[allow(unused_imports)]
use num_derive::FromPrimitive;
#[allow(unused_imports)]
use num_traits::FromPrimitive;

// PduSessionResourceSetupRequest
#[derive(Clone)]
pub struct PduSessionResourceSetupRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ran_paging_priority: Option<RanPagingPriority>,
    pub nas_pdu: Option<NasPdu>,
    pub pdu_session_resource_setup_list_su_req: PduSessionResourceSetupListSuReq,
    pub ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate>,
}

impl APerElement for PduSessionResourceSetupRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ran_paging_priority: Option<RanPagingPriority> = None;
        let mut nas_pdu: Option<NasPdu> = None;
        let mut pdu_session_resource_setup_list_su_req: Option<PduSessionResourceSetupListSuReq> =
            None;
        let mut ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                83 => {
                    ran_paging_priority =
                        Some(RanPagingPriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                38 => {
                    nas_pdu = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                74 => {
                    pdu_session_resource_setup_list_su_req = Some(
                        PduSessionResourceSetupListSuReq::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                110 => {
                    ue_aggregate_maximum_bit_rate = Some(UeAggregateMaximumBitRate::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_setup_list_su_req =
            pdu_session_resource_setup_list_su_req.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ran_paging_priority,
            nas_pdu,
            pdu_session_resource_setup_list_su_req,
            ue_aggregate_maximum_bit_rate,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ran_paging_priority.is_some(),
            self.nas_pdu.is_some(),
            self.ue_aggregate_maximum_bit_rate.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (74 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_setup_list_su_req
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ran_paging_priority {
            (83 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nas_pdu {
            (38 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_aggregate_maximum_bit_rate {
            (110 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceSetupResponse
#[derive(Clone)]
pub struct PduSessionResourceSetupResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_setup_list_su_res: Option<PduSessionResourceSetupListSuRes>,
    pub pdu_session_resource_failed_to_setup_list_su_res:
        Option<PduSessionResourceFailedToSetupListSuRes>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for PduSessionResourceSetupResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_setup_list_su_res: Option<PduSessionResourceSetupListSuRes> =
            None;
        let mut pdu_session_resource_failed_to_setup_list_su_res: Option<
            PduSessionResourceFailedToSetupListSuRes,
        > = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                75 => {
                    pdu_session_resource_setup_list_su_res = Some(
                        PduSessionResourceSetupListSuRes::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                58 => {
                    pdu_session_resource_failed_to_setup_list_su_res =
                        Some(PduSessionResourceFailedToSetupListSuRes::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_setup_list_su_res,
            pdu_session_resource_failed_to_setup_list_su_res,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_setup_list_su_res.is_some(),
            self.pdu_session_resource_failed_to_setup_list_su_res
                .is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_setup_list_su_res {
            (75 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_failed_to_setup_list_su_res {
            (58 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceReleaseCommand
#[derive(Clone)]
pub struct PduSessionResourceReleaseCommand {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ran_paging_priority: Option<RanPagingPriority>,
    pub nas_pdu: Option<NasPdu>,
    pub pdu_session_resource_to_release_list_rel_cmd: PduSessionResourceToReleaseListRelCmd,
}

impl APerElement for PduSessionResourceReleaseCommand {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ran_paging_priority: Option<RanPagingPriority> = None;
        let mut nas_pdu: Option<NasPdu> = None;
        let mut pdu_session_resource_to_release_list_rel_cmd: Option<
            PduSessionResourceToReleaseListRelCmd,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                83 => {
                    ran_paging_priority =
                        Some(RanPagingPriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                38 => {
                    nas_pdu = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                79 => {
                    pdu_session_resource_to_release_list_rel_cmd = Some(
                        PduSessionResourceToReleaseListRelCmd::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_to_release_list_rel_cmd =
            pdu_session_resource_to_release_list_rel_cmd.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ran_paging_priority,
            nas_pdu,
            pdu_session_resource_to_release_list_rel_cmd,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.ran_paging_priority.is_some(), self.nas_pdu.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (79 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_to_release_list_rel_cmd
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ran_paging_priority {
            (83 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nas_pdu {
            (38 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceReleaseResponse
#[derive(Clone)]
pub struct PduSessionResourceReleaseResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_released_list_rel_res: PduSessionResourceReleasedListRelRes,
    pub user_location_information: Option<UserLocationInformation>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for PduSessionResourceReleaseResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_released_list_rel_res: Option<
            PduSessionResourceReleasedListRelRes,
        > = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                70 => {
                    pdu_session_resource_released_list_rel_res = Some(
                        PduSessionResourceReleasedListRelRes::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_released_list_rel_res =
            pdu_session_resource_released_list_rel_res.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_released_list_rel_res,
            user_location_information,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.user_location_information.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (70 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_released_list_rel_res
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.user_location_information {
            (121 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceModifyRequest
#[derive(Clone)]
pub struct PduSessionResourceModifyRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ran_paging_priority: Option<RanPagingPriority>,
    pub pdu_session_resource_modify_list_mod_req: PduSessionResourceModifyListModReq,
}

impl APerElement for PduSessionResourceModifyRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ran_paging_priority: Option<RanPagingPriority> = None;
        let mut pdu_session_resource_modify_list_mod_req: Option<
            PduSessionResourceModifyListModReq,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                83 => {
                    ran_paging_priority =
                        Some(RanPagingPriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                64 => {
                    pdu_session_resource_modify_list_mod_req = Some(
                        PduSessionResourceModifyListModReq::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_modify_list_mod_req =
            pdu_session_resource_modify_list_mod_req.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ran_paging_priority,
            pdu_session_resource_modify_list_mod_req,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.ran_paging_priority.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (64 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_modify_list_mod_req
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ran_paging_priority {
            (83 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceModifyResponse
#[derive(Clone)]
pub struct PduSessionResourceModifyResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_modify_list_mod_res: Option<PduSessionResourceModifyListModRes>,
    pub pdu_session_resource_failed_to_modify_list_mod_res:
        Option<PduSessionResourceFailedToModifyListModRes>,
    pub user_location_information: Option<UserLocationInformation>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for PduSessionResourceModifyResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_modify_list_mod_res: Option<
            PduSessionResourceModifyListModRes,
        > = None;
        let mut pdu_session_resource_failed_to_modify_list_mod_res: Option<
            PduSessionResourceFailedToModifyListModRes,
        > = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                65 => {
                    pdu_session_resource_modify_list_mod_res = Some(
                        PduSessionResourceModifyListModRes::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                54 => {
                    pdu_session_resource_failed_to_modify_list_mod_res =
                        Some(PduSessionResourceFailedToModifyListModRes::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_modify_list_mod_res,
            pdu_session_resource_failed_to_modify_list_mod_res,
            user_location_information,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_modify_list_mod_res.is_some(),
            self.pdu_session_resource_failed_to_modify_list_mod_res
                .is_some(),
            self.user_location_information.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_modify_list_mod_res {
            (65 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_failed_to_modify_list_mod_res {
            (54 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.user_location_information {
            (121 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceNotify
#[derive(Clone)]
pub struct PduSessionResourceNotify {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_notify_list: Option<PduSessionResourceNotifyList>,
    pub pdu_session_resource_released_list_not: Option<PduSessionResourceReleasedListNot>,
    pub user_location_information: Option<UserLocationInformation>,
}

impl APerElement for PduSessionResourceNotify {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_notify_list: Option<PduSessionResourceNotifyList> = None;
        let mut pdu_session_resource_released_list_not: Option<PduSessionResourceReleasedListNot> =
            None;
        let mut user_location_information: Option<UserLocationInformation> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                66 => {
                    pdu_session_resource_notify_list = Some(
                        PduSessionResourceNotifyList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                67 => {
                    pdu_session_resource_released_list_not = Some(
                        PduSessionResourceReleasedListNot::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_notify_list,
            pdu_session_resource_released_list_not,
            user_location_information,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_notify_list.is_some(),
            self.pdu_session_resource_released_list_not.is_some(),
            self.user_location_information.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_notify_list {
            (66 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_released_list_not {
            (67 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.user_location_information {
            (121 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceModifyIndication
#[derive(Clone)]
pub struct PduSessionResourceModifyIndication {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_modify_list_mod_ind: PduSessionResourceModifyListModInd,
    pub user_location_information: Option<UserLocationInformation>,
}

impl APerElement for PduSessionResourceModifyIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_modify_list_mod_ind: Option<
            PduSessionResourceModifyListModInd,
        > = None;
        let mut user_location_information: Option<UserLocationInformation> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                63 => {
                    pdu_session_resource_modify_list_mod_ind = Some(
                        PduSessionResourceModifyListModInd::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_modify_list_mod_ind =
            pdu_session_resource_modify_list_mod_ind.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_modify_list_mod_ind,
            user_location_information,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.user_location_information.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (63 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_modify_list_mod_ind
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.user_location_information {
            (121 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PduSessionResourceModifyConfirm
#[derive(Clone)]
pub struct PduSessionResourceModifyConfirm {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_modify_list_mod_cfm: Option<PduSessionResourceModifyListModCfm>,
    pub pdu_session_resource_failed_to_modify_list_mod_cfm:
        Option<PduSessionResourceFailedToModifyListModCfm>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for PduSessionResourceModifyConfirm {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_modify_list_mod_cfm: Option<
            PduSessionResourceModifyListModCfm,
        > = None;
        let mut pdu_session_resource_failed_to_modify_list_mod_cfm: Option<
            PduSessionResourceFailedToModifyListModCfm,
        > = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                62 => {
                    pdu_session_resource_modify_list_mod_cfm = Some(
                        PduSessionResourceModifyListModCfm::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                131 => {
                    pdu_session_resource_failed_to_modify_list_mod_cfm =
                        Some(PduSessionResourceFailedToModifyListModCfm::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_modify_list_mod_cfm,
            pdu_session_resource_failed_to_modify_list_mod_cfm,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_modify_list_mod_cfm.is_some(),
            self.pdu_session_resource_failed_to_modify_list_mod_cfm
                .is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_modify_list_mod_cfm {
            (62 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_failed_to_modify_list_mod_cfm {
            (131 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// InitialContextSetupRequest
#[derive(Clone)]
pub struct InitialContextSetupRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub old_amf: Option<AmfName>,
    pub ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate>,
    pub core_network_assistance_information_for_inactive:
        Option<CoreNetworkAssistanceInformationForInactive>,
    pub guami: Guami,
    pub pdu_session_resource_setup_list_cxt_req: Option<PduSessionResourceSetupListCxtReq>,
    pub allowed_nssai: AllowedNssai,
    pub ue_security_capabilities: UeSecurityCapabilities,
    pub security_key: SecurityKey,
    pub trace_activation: Option<TraceActivation>,
    pub mobility_restriction_list: Option<MobilityRestrictionList>,
    pub ue_radio_capability: Option<UeRadioCapability>,
    pub index_to_rfsp: Option<IndexToRfsp>,
    pub masked_imeisv: Option<MaskedImeisv>,
    pub nas_pdu: Option<NasPdu>,
    pub emergency_fallback_indicator: Option<EmergencyFallbackIndicator>,
    pub rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest>,
    pub ue_radio_capability_for_paging: Option<UeRadioCapabilityForPaging>,
    pub redirection_voice_fallback: Option<RedirectionVoiceFallback>,
    pub location_reporting_request_type: Option<LocationReportingRequestType>,
    pub cn_assisted_ran_tuning: Option<CnAssistedRanTuning>,
    pub srvcc_operation_possible: Option<SrvccOperationPossible>,
    pub iab_authorized: Option<IabAuthorized>,
    pub enhanced_coverage_restriction: Option<EnhancedCoverageRestriction>,
    pub extended_connected_time: Option<ExtendedConnectedTime>,
    pub ue_differentiation_info: Option<UeDifferentiationInfo>,
    pub nrv2x_services_authorized: Option<Nrv2xServicesAuthorized>,
    pub ltev2x_services_authorized: Option<Ltev2xServicesAuthorized>,
    pub nrue_sidelink_aggregate_maximum_bitrate: Option<NrueSidelinkAggregateMaximumBitrate>,
    pub lteue_sidelink_aggregate_maximum_bitrate: Option<LteueSidelinkAggregateMaximumBitrate>,
    pub pc5_qos_parameters: Option<Pc5QosParameters>,
    pub c_emode_brestricted: Option<CEmodeBrestricted>,
    pub ue_up_c_iot_support: Option<UeUpCIotSupport>,
    pub rg_level_wireline_access_characteristics: Option<RgLevelWirelineAccessCharacteristics>,
    pub management_based_mdt_plmn_list: Option<MdtPlmnList>,
    pub ue_radio_capability_id: Option<UeRadioCapabilityId>,
}

impl APerElement for InitialContextSetupRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut old_amf: Option<AmfName> = None;
        let mut ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate> = None;
        let mut core_network_assistance_information_for_inactive: Option<
            CoreNetworkAssistanceInformationForInactive,
        > = None;
        let mut guami: Option<Guami> = None;
        let mut pdu_session_resource_setup_list_cxt_req: Option<PduSessionResourceSetupListCxtReq> =
            None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut ue_security_capabilities: Option<UeSecurityCapabilities> = None;
        let mut security_key: Option<SecurityKey> = None;
        let mut trace_activation: Option<TraceActivation> = None;
        let mut mobility_restriction_list: Option<MobilityRestrictionList> = None;
        let mut ue_radio_capability: Option<UeRadioCapability> = None;
        let mut index_to_rfsp: Option<IndexToRfsp> = None;
        let mut masked_imeisv: Option<MaskedImeisv> = None;
        let mut nas_pdu: Option<NasPdu> = None;
        let mut emergency_fallback_indicator: Option<EmergencyFallbackIndicator> = None;
        let mut rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest> =
            None;
        let mut ue_radio_capability_for_paging: Option<UeRadioCapabilityForPaging> = None;
        let mut redirection_voice_fallback: Option<RedirectionVoiceFallback> = None;
        let mut location_reporting_request_type: Option<LocationReportingRequestType> = None;
        let mut cn_assisted_ran_tuning: Option<CnAssistedRanTuning> = None;
        let mut srvcc_operation_possible: Option<SrvccOperationPossible> = None;
        let mut iab_authorized: Option<IabAuthorized> = None;
        let mut enhanced_coverage_restriction: Option<EnhancedCoverageRestriction> = None;
        let mut extended_connected_time: Option<ExtendedConnectedTime> = None;
        let mut ue_differentiation_info: Option<UeDifferentiationInfo> = None;
        let mut nrv2x_services_authorized: Option<Nrv2xServicesAuthorized> = None;
        let mut ltev2x_services_authorized: Option<Ltev2xServicesAuthorized> = None;
        let mut nrue_sidelink_aggregate_maximum_bitrate: Option<
            NrueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut lteue_sidelink_aggregate_maximum_bitrate: Option<
            LteueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut pc5_qos_parameters: Option<Pc5QosParameters> = None;
        let mut c_emode_brestricted: Option<CEmodeBrestricted> = None;
        let mut ue_up_c_iot_support: Option<UeUpCIotSupport> = None;
        let mut rg_level_wireline_access_characteristics: Option<
            RgLevelWirelineAccessCharacteristics,
        > = None;
        let mut management_based_mdt_plmn_list: Option<MdtPlmnList> = None;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                48 => {
                    old_amf = Some(AmfName::from_aper(decoder, UNCONSTRAINED)?);
                }
                110 => {
                    ue_aggregate_maximum_bit_rate = Some(UeAggregateMaximumBitRate::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                18 => {
                    core_network_assistance_information_for_inactive =
                        Some(CoreNetworkAssistanceInformationForInactive::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                28 => {
                    guami = Some(Guami::from_aper(decoder, UNCONSTRAINED)?);
                }
                71 => {
                    pdu_session_resource_setup_list_cxt_req = Some(
                        PduSessionResourceSetupListCxtReq::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                119 => {
                    ue_security_capabilities =
                        Some(UeSecurityCapabilities::from_aper(decoder, UNCONSTRAINED)?);
                }
                94 => {
                    security_key = Some(SecurityKey::from_aper(decoder, UNCONSTRAINED)?);
                }
                108 => {
                    trace_activation = Some(TraceActivation::from_aper(decoder, UNCONSTRAINED)?);
                }
                36 => {
                    mobility_restriction_list =
                        Some(MobilityRestrictionList::from_aper(decoder, UNCONSTRAINED)?);
                }
                117 => {
                    ue_radio_capability =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                31 => {
                    index_to_rfsp = Some(IndexToRfsp::from_aper(decoder, UNCONSTRAINED)?);
                }
                34 => {
                    masked_imeisv = Some(MaskedImeisv::from_aper(decoder, UNCONSTRAINED)?);
                }
                38 => {
                    nas_pdu = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                24 => {
                    emergency_fallback_indicator = Some(EmergencyFallbackIndicator::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                91 => {
                    rrc_inactive_transition_report_request = Some(
                        RrcInactiveTransitionReportRequest::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                118 => {
                    ue_radio_capability_for_paging = Some(UeRadioCapabilityForPaging::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                146 => {
                    redirection_voice_fallback =
                        Some(RedirectionVoiceFallback::from_aper(decoder, UNCONSTRAINED)?);
                }
                33 => {
                    location_reporting_request_type = Some(
                        LocationReportingRequestType::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                165 => {
                    cn_assisted_ran_tuning =
                        Some(CnAssistedRanTuning::from_aper(decoder, UNCONSTRAINED)?);
                }
                177 => {
                    srvcc_operation_possible =
                        Some(SrvccOperationPossible::from_aper(decoder, UNCONSTRAINED)?);
                }
                199 => {
                    iab_authorized = Some(IabAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                205 => {
                    enhanced_coverage_restriction = Some(EnhancedCoverageRestriction::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                206 => {
                    extended_connected_time =
                        Some(ExtendedConnectedTime::from_aper(decoder, UNCONSTRAINED)?);
                }
                209 => {
                    ue_differentiation_info =
                        Some(UeDifferentiationInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                216 => {
                    nrv2x_services_authorized =
                        Some(Nrv2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                215 => {
                    ltev2x_services_authorized =
                        Some(Ltev2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                218 => {
                    nrue_sidelink_aggregate_maximum_bitrate = Some(
                        NrueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                217 => {
                    lteue_sidelink_aggregate_maximum_bitrate = Some(
                        LteueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                219 => {
                    pc5_qos_parameters = Some(Pc5QosParameters::from_aper(decoder, UNCONSTRAINED)?);
                }
                222 => {
                    c_emode_brestricted =
                        Some(CEmodeBrestricted::from_aper(decoder, UNCONSTRAINED)?);
                }
                234 => {
                    ue_up_c_iot_support = Some(UeUpCIotSupport::from_aper(decoder, UNCONSTRAINED)?);
                }
                238 => {
                    rg_level_wireline_access_characteristics = Some(
                        RgLevelWirelineAccessCharacteristics::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                254 => {
                    management_based_mdt_plmn_list =
                        Some(MdtPlmnList::from_aper(decoder, UNCONSTRAINED)?);
                }
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let guami = guami.ok_or(DecodeError::InvalidChoice)?;
        let allowed_nssai = allowed_nssai.ok_or(DecodeError::InvalidChoice)?;
        let ue_security_capabilities =
            ue_security_capabilities.ok_or(DecodeError::InvalidChoice)?;
        let security_key = security_key.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            old_amf,
            ue_aggregate_maximum_bit_rate,
            core_network_assistance_information_for_inactive,
            guami,
            pdu_session_resource_setup_list_cxt_req,
            allowed_nssai,
            ue_security_capabilities,
            security_key,
            trace_activation,
            mobility_restriction_list,
            ue_radio_capability,
            index_to_rfsp,
            masked_imeisv,
            nas_pdu,
            emergency_fallback_indicator,
            rrc_inactive_transition_report_request,
            ue_radio_capability_for_paging,
            redirection_voice_fallback,
            location_reporting_request_type,
            cn_assisted_ran_tuning,
            srvcc_operation_possible,
            iab_authorized,
            enhanced_coverage_restriction,
            extended_connected_time,
            ue_differentiation_info,
            nrv2x_services_authorized,
            ltev2x_services_authorized,
            nrue_sidelink_aggregate_maximum_bitrate,
            lteue_sidelink_aggregate_maximum_bitrate,
            pc5_qos_parameters,
            c_emode_brestricted,
            ue_up_c_iot_support,
            rg_level_wireline_access_characteristics,
            management_based_mdt_plmn_list,
            ue_radio_capability_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.old_amf.is_some(),
            self.ue_aggregate_maximum_bit_rate.is_some(),
            self.core_network_assistance_information_for_inactive
                .is_some(),
            self.pdu_session_resource_setup_list_cxt_req.is_some(),
            self.trace_activation.is_some(),
            self.mobility_restriction_list.is_some(),
            self.ue_radio_capability.is_some(),
            self.index_to_rfsp.is_some(),
            self.masked_imeisv.is_some(),
            self.nas_pdu.is_some(),
            self.emergency_fallback_indicator.is_some(),
            self.rrc_inactive_transition_report_request.is_some(),
            self.ue_radio_capability_for_paging.is_some(),
            self.redirection_voice_fallback.is_some(),
            self.location_reporting_request_type.is_some(),
            self.cn_assisted_ran_tuning.is_some(),
            self.srvcc_operation_possible.is_some(),
            self.iab_authorized.is_some(),
            self.enhanced_coverage_restriction.is_some(),
            self.extended_connected_time.is_some(),
            self.ue_differentiation_info.is_some(),
            self.nrv2x_services_authorized.is_some(),
            self.ltev2x_services_authorized.is_some(),
            self.nrue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.lteue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.pc5_qos_parameters.is_some(),
            self.c_emode_brestricted.is_some(),
            self.ue_up_c_iot_support.is_some(),
            self.rg_level_wireline_access_characteristics.is_some(),
            self.management_based_mdt_plmn_list.is_some(),
            self.ue_radio_capability_id.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (28 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.guami.to_aper(enc, UNCONSTRAINED)?;
        (0 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.allowed_nssai.to_aper(enc, UNCONSTRAINED)?;
        (119 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ue_security_capabilities.to_aper(enc, UNCONSTRAINED)?;
        (94 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.security_key.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.old_amf {
            (48 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_aggregate_maximum_bit_rate {
            (110 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.core_network_assistance_information_for_inactive {
            (18 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_setup_list_cxt_req {
            (71 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.trace_activation {
            (108 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.mobility_restriction_list {
            (36 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability {
            (117 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.index_to_rfsp {
            (31 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.masked_imeisv {
            (34 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nas_pdu {
            (38 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.emergency_fallback_indicator {
            (24 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.rrc_inactive_transition_report_request {
            (91 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_for_paging {
            (118 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.redirection_voice_fallback {
            (146 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.location_reporting_request_type {
            (33 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.cn_assisted_ran_tuning {
            (165 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.srvcc_operation_possible {
            (177 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.iab_authorized {
            (199 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.enhanced_coverage_restriction {
            (205 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_connected_time {
            (206 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_differentiation_info {
            (209 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrv2x_services_authorized {
            (216 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ltev2x_services_authorized {
            (215 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrue_sidelink_aggregate_maximum_bitrate {
            (218 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.lteue_sidelink_aggregate_maximum_bitrate {
            (217 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pc5_qos_parameters {
            (219 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.c_emode_brestricted {
            (222 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_up_c_iot_support {
            (234 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.rg_level_wireline_access_characteristics {
            (238 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.management_based_mdt_plmn_list {
            (254 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_id {
            (264 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// InitialContextSetupResponse
#[derive(Clone)]
pub struct InitialContextSetupResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_setup_list_cxt_res: Option<PduSessionResourceSetupListCxtRes>,
    pub pdu_session_resource_failed_to_setup_list_cxt_res:
        Option<PduSessionResourceFailedToSetupListCxtRes>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for InitialContextSetupResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_setup_list_cxt_res: Option<PduSessionResourceSetupListCxtRes> =
            None;
        let mut pdu_session_resource_failed_to_setup_list_cxt_res: Option<
            PduSessionResourceFailedToSetupListCxtRes,
        > = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                72 => {
                    pdu_session_resource_setup_list_cxt_res = Some(
                        PduSessionResourceSetupListCxtRes::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                55 => {
                    pdu_session_resource_failed_to_setup_list_cxt_res =
                        Some(PduSessionResourceFailedToSetupListCxtRes::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_setup_list_cxt_res,
            pdu_session_resource_failed_to_setup_list_cxt_res,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_setup_list_cxt_res.is_some(),
            self.pdu_session_resource_failed_to_setup_list_cxt_res
                .is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_setup_list_cxt_res {
            (72 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_failed_to_setup_list_cxt_res {
            (55 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// InitialContextSetupFailure
#[derive(Clone)]
pub struct InitialContextSetupFailure {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_failed_to_setup_list_cxt_fail:
        Option<PduSessionResourceFailedToSetupListCxtFail>,
    pub cause: Cause,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for InitialContextSetupFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_failed_to_setup_list_cxt_fail: Option<
            PduSessionResourceFailedToSetupListCxtFail,
        > = None;
        let mut cause: Option<Cause> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                132 => {
                    pdu_session_resource_failed_to_setup_list_cxt_fail =
                        Some(PduSessionResourceFailedToSetupListCxtFail::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_failed_to_setup_list_cxt_fail,
            cause,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_failed_to_setup_list_cxt_fail
                .is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_failed_to_setup_list_cxt_fail {
            (132 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextReleaseRequest
#[derive(Clone)]
pub struct UeContextReleaseRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_list_cxt_rel_req: Option<PduSessionResourceListCxtRelReq>,
    pub cause: Cause,
}

impl APerElement for UeContextReleaseRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_list_cxt_rel_req: Option<PduSessionResourceListCxtRelReq> =
            None;
        let mut cause: Option<Cause> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                133 => {
                    pdu_session_resource_list_cxt_rel_req = Some(
                        PduSessionResourceListCxtRelReq::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_list_cxt_rel_req,
            cause,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.pdu_session_resource_list_cxt_rel_req.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_list_cxt_rel_req {
            (133 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextReleaseCommand
#[derive(Clone)]
pub struct UeContextReleaseCommand {
    pub ue_ngap_i_ds: UeNgapIDs,
    pub cause: Cause,
}

impl APerElement for UeContextReleaseCommand {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ue_ngap_i_ds: Option<UeNgapIDs> = None;
        let mut cause: Option<Cause> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                114 => {
                    ue_ngap_i_ds = Some(UeNgapIDs::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ue_ngap_i_ds = ue_ngap_i_ds.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ue_ngap_i_ds,
            cause,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (114 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ue_ngap_i_ds.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UeContextReleaseComplete
#[derive(Clone)]
pub struct UeContextReleaseComplete {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub user_location_information: Option<UserLocationInformation>,
    pub info_on_recommended_cells_and_ran_nodes_for_paging:
        Option<InfoOnRecommendedCellsAndRanNodesForPaging>,
    pub pdu_session_resource_list_cxt_rel_cpl: Option<PduSessionResourceListCxtRelCpl>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
    pub paging_assis_datafor_c_ecapab_ue: Option<PagingAssisDataforCEcapabUe>,
}

impl APerElement for UeContextReleaseComplete {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut info_on_recommended_cells_and_ran_nodes_for_paging: Option<
            InfoOnRecommendedCellsAndRanNodesForPaging,
        > = None;
        let mut pdu_session_resource_list_cxt_rel_cpl: Option<PduSessionResourceListCxtRelCpl> =
            None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;
        let mut paging_assis_datafor_c_ecapab_ue: Option<PagingAssisDataforCEcapabUe> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                32 => {
                    info_on_recommended_cells_and_ran_nodes_for_paging =
                        Some(InfoOnRecommendedCellsAndRanNodesForPaging::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                60 => {
                    pdu_session_resource_list_cxt_rel_cpl = Some(
                        PduSessionResourceListCxtRelCpl::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                207 => {
                    paging_assis_datafor_c_ecapab_ue = Some(
                        PagingAssisDataforCEcapabUe::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            user_location_information,
            info_on_recommended_cells_and_ran_nodes_for_paging,
            pdu_session_resource_list_cxt_rel_cpl,
            criticality_diagnostics,
            paging_assis_datafor_c_ecapab_ue,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.user_location_information.is_some(),
            self.info_on_recommended_cells_and_ran_nodes_for_paging
                .is_some(),
            self.pdu_session_resource_list_cxt_rel_cpl.is_some(),
            self.criticality_diagnostics.is_some(),
            self.paging_assis_datafor_c_ecapab_ue.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.user_location_information {
            (121 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.info_on_recommended_cells_and_ran_nodes_for_paging {
            (32 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_list_cxt_rel_cpl {
            (60 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.paging_assis_datafor_c_ecapab_ue {
            (207 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextResumeRequest
#[derive(Clone)]
pub struct UeContextResumeRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub rrc_resume_cause: RrcEstablishmentCause,
    pub pdu_session_resource_resume_list_res_req: Option<PduSessionResourceResumeListResReq>,
    pub pdu_session_resource_failed_to_resume_list_res_req:
        Option<PduSessionResourceFailedToResumeListResReq>,
    pub suspend_request_indication: Option<SuspendRequestIndication>,
    pub info_on_recommended_cells_and_ran_nodes_for_paging:
        Option<InfoOnRecommendedCellsAndRanNodesForPaging>,
    pub paging_assis_datafor_c_ecapab_ue: Option<PagingAssisDataforCEcapabUe>,
}

impl APerElement for UeContextResumeRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut rrc_resume_cause: Option<RrcEstablishmentCause> = None;
        let mut pdu_session_resource_resume_list_res_req: Option<
            PduSessionResourceResumeListResReq,
        > = None;
        let mut pdu_session_resource_failed_to_resume_list_res_req: Option<
            PduSessionResourceFailedToResumeListResReq,
        > = None;
        let mut suspend_request_indication: Option<SuspendRequestIndication> = None;
        let mut info_on_recommended_cells_and_ran_nodes_for_paging: Option<
            InfoOnRecommendedCellsAndRanNodesForPaging,
        > = None;
        let mut paging_assis_datafor_c_ecapab_ue: Option<PagingAssisDataforCEcapabUe> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                237 => {
                    rrc_resume_cause =
                        Some(RrcEstablishmentCause::from_aper(decoder, UNCONSTRAINED)?);
                }
                232 => {
                    pdu_session_resource_resume_list_res_req = Some(
                        PduSessionResourceResumeListResReq::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                229 => {
                    pdu_session_resource_failed_to_resume_list_res_req =
                        Some(PduSessionResourceFailedToResumeListResReq::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                235 => {
                    suspend_request_indication =
                        Some(SuspendRequestIndication::from_aper(decoder, UNCONSTRAINED)?);
                }
                32 => {
                    info_on_recommended_cells_and_ran_nodes_for_paging =
                        Some(InfoOnRecommendedCellsAndRanNodesForPaging::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                207 => {
                    paging_assis_datafor_c_ecapab_ue = Some(
                        PagingAssisDataforCEcapabUe::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let rrc_resume_cause = rrc_resume_cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            rrc_resume_cause,
            pdu_session_resource_resume_list_res_req,
            pdu_session_resource_failed_to_resume_list_res_req,
            suspend_request_indication,
            info_on_recommended_cells_and_ran_nodes_for_paging,
            paging_assis_datafor_c_ecapab_ue,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_resume_list_res_req.is_some(),
            self.pdu_session_resource_failed_to_resume_list_res_req
                .is_some(),
            self.suspend_request_indication.is_some(),
            self.info_on_recommended_cells_and_ran_nodes_for_paging
                .is_some(),
            self.paging_assis_datafor_c_ecapab_ue.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (237 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.rrc_resume_cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_resume_list_res_req {
            (232 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_failed_to_resume_list_res_req {
            (229 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.suspend_request_indication {
            (235 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.info_on_recommended_cells_and_ran_nodes_for_paging {
            (32 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.paging_assis_datafor_c_ecapab_ue {
            (207 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextResumeResponse
#[derive(Clone)]
pub struct UeContextResumeResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_resume_list_res_res: Option<PduSessionResourceResumeListResRes>,
    pub pdu_session_resource_failed_to_resume_list_res_res:
        Option<PduSessionResourceFailedToResumeListResRes>,
    pub security_context: Option<SecurityContext>,
    pub suspend_response_indication: Option<SuspendResponseIndication>,
    pub extended_connected_time: Option<ExtendedConnectedTime>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeContextResumeResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_resume_list_res_res: Option<
            PduSessionResourceResumeListResRes,
        > = None;
        let mut pdu_session_resource_failed_to_resume_list_res_res: Option<
            PduSessionResourceFailedToResumeListResRes,
        > = None;
        let mut security_context: Option<SecurityContext> = None;
        let mut suspend_response_indication: Option<SuspendResponseIndication> = None;
        let mut extended_connected_time: Option<ExtendedConnectedTime> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                233 => {
                    pdu_session_resource_resume_list_res_res = Some(
                        PduSessionResourceResumeListResRes::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                230 => {
                    pdu_session_resource_failed_to_resume_list_res_res =
                        Some(PduSessionResourceFailedToResumeListResRes::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                93 => {
                    security_context = Some(SecurityContext::from_aper(decoder, UNCONSTRAINED)?);
                }
                236 => {
                    suspend_response_indication = Some(SuspendResponseIndication::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                206 => {
                    extended_connected_time =
                        Some(ExtendedConnectedTime::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_resume_list_res_res,
            pdu_session_resource_failed_to_resume_list_res_res,
            security_context,
            suspend_response_indication,
            extended_connected_time,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_resume_list_res_res.is_some(),
            self.pdu_session_resource_failed_to_resume_list_res_res
                .is_some(),
            self.security_context.is_some(),
            self.suspend_response_indication.is_some(),
            self.extended_connected_time.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_resume_list_res_res {
            (233 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_failed_to_resume_list_res_res {
            (230 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.security_context {
            (93 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.suspend_response_indication {
            (236 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_connected_time {
            (206 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextResumeFailure
#[derive(Clone)]
pub struct UeContextResumeFailure {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub cause: Cause,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeContextResumeFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut cause: Option<Cause> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            cause,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextSuspendRequest
#[derive(Clone)]
pub struct UeContextSuspendRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub info_on_recommended_cells_and_ran_nodes_for_paging:
        Option<InfoOnRecommendedCellsAndRanNodesForPaging>,
    pub paging_assis_datafor_c_ecapab_ue: Option<PagingAssisDataforCEcapabUe>,
    pub pdu_session_resource_suspend_list_sus_req: Option<PduSessionResourceSuspendListSusReq>,
}

impl APerElement for UeContextSuspendRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut info_on_recommended_cells_and_ran_nodes_for_paging: Option<
            InfoOnRecommendedCellsAndRanNodesForPaging,
        > = None;
        let mut paging_assis_datafor_c_ecapab_ue: Option<PagingAssisDataforCEcapabUe> = None;
        let mut pdu_session_resource_suspend_list_sus_req: Option<
            PduSessionResourceSuspendListSusReq,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                32 => {
                    info_on_recommended_cells_and_ran_nodes_for_paging =
                        Some(InfoOnRecommendedCellsAndRanNodesForPaging::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                207 => {
                    paging_assis_datafor_c_ecapab_ue = Some(
                        PagingAssisDataforCEcapabUe::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                231 => {
                    pdu_session_resource_suspend_list_sus_req = Some(
                        PduSessionResourceSuspendListSusReq::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            info_on_recommended_cells_and_ran_nodes_for_paging,
            paging_assis_datafor_c_ecapab_ue,
            pdu_session_resource_suspend_list_sus_req,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.info_on_recommended_cells_and_ran_nodes_for_paging
                .is_some(),
            self.paging_assis_datafor_c_ecapab_ue.is_some(),
            self.pdu_session_resource_suspend_list_sus_req.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.info_on_recommended_cells_and_ran_nodes_for_paging {
            (32 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.paging_assis_datafor_c_ecapab_ue {
            (207 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_suspend_list_sus_req {
            (231 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextSuspendResponse
#[derive(Clone)]
pub struct UeContextSuspendResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub security_context: Option<SecurityContext>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeContextSuspendResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut security_context: Option<SecurityContext> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                93 => {
                    security_context = Some(SecurityContext::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            security_context,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.security_context.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.security_context {
            (93 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextSuspendFailure
#[derive(Clone)]
pub struct UeContextSuspendFailure {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub cause: Cause,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeContextSuspendFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut cause: Option<Cause> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            cause,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextModificationRequest
#[derive(Clone)]
pub struct UeContextModificationRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ran_paging_priority: Option<RanPagingPriority>,
    pub security_key: Option<SecurityKey>,
    pub index_to_rfsp: Option<IndexToRfsp>,
    pub ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate>,
    pub ue_security_capabilities: Option<UeSecurityCapabilities>,
    pub core_network_assistance_information_for_inactive:
        Option<CoreNetworkAssistanceInformationForInactive>,
    pub emergency_fallback_indicator: Option<EmergencyFallbackIndicator>,
    pub new_amf_ue_ngap_id: Option<AmfUeNgapId>,
    pub rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest>,
    pub new_guami: Option<Guami>,
    pub cn_assisted_ran_tuning: Option<CnAssistedRanTuning>,
    pub srvcc_operation_possible: Option<SrvccOperationPossible>,
    pub iab_authorized: Option<IabAuthorized>,
    pub nrv2x_services_authorized: Option<Nrv2xServicesAuthorized>,
    pub ltev2x_services_authorized: Option<Ltev2xServicesAuthorized>,
    pub nrue_sidelink_aggregate_maximum_bitrate: Option<NrueSidelinkAggregateMaximumBitrate>,
    pub lteue_sidelink_aggregate_maximum_bitrate: Option<LteueSidelinkAggregateMaximumBitrate>,
    pub pc5_qos_parameters: Option<Pc5QosParameters>,
    pub ue_radio_capability_id: Option<UeRadioCapabilityId>,
    pub rg_level_wireline_access_characteristics: Option<RgLevelWirelineAccessCharacteristics>,
}

impl APerElement for UeContextModificationRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ran_paging_priority: Option<RanPagingPriority> = None;
        let mut security_key: Option<SecurityKey> = None;
        let mut index_to_rfsp: Option<IndexToRfsp> = None;
        let mut ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate> = None;
        let mut ue_security_capabilities: Option<UeSecurityCapabilities> = None;
        let mut core_network_assistance_information_for_inactive: Option<
            CoreNetworkAssistanceInformationForInactive,
        > = None;
        let mut emergency_fallback_indicator: Option<EmergencyFallbackIndicator> = None;
        let mut new_amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest> =
            None;
        let mut new_guami: Option<Guami> = None;
        let mut cn_assisted_ran_tuning: Option<CnAssistedRanTuning> = None;
        let mut srvcc_operation_possible: Option<SrvccOperationPossible> = None;
        let mut iab_authorized: Option<IabAuthorized> = None;
        let mut nrv2x_services_authorized: Option<Nrv2xServicesAuthorized> = None;
        let mut ltev2x_services_authorized: Option<Ltev2xServicesAuthorized> = None;
        let mut nrue_sidelink_aggregate_maximum_bitrate: Option<
            NrueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut lteue_sidelink_aggregate_maximum_bitrate: Option<
            LteueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut pc5_qos_parameters: Option<Pc5QosParameters> = None;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;
        let mut rg_level_wireline_access_characteristics: Option<
            RgLevelWirelineAccessCharacteristics,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                83 => {
                    ran_paging_priority =
                        Some(RanPagingPriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                94 => {
                    security_key = Some(SecurityKey::from_aper(decoder, UNCONSTRAINED)?);
                }
                31 => {
                    index_to_rfsp = Some(IndexToRfsp::from_aper(decoder, UNCONSTRAINED)?);
                }
                110 => {
                    ue_aggregate_maximum_bit_rate = Some(UeAggregateMaximumBitRate::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                119 => {
                    ue_security_capabilities =
                        Some(UeSecurityCapabilities::from_aper(decoder, UNCONSTRAINED)?);
                }
                18 => {
                    core_network_assistance_information_for_inactive =
                        Some(CoreNetworkAssistanceInformationForInactive::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                24 => {
                    emergency_fallback_indicator = Some(EmergencyFallbackIndicator::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                40 => {
                    new_amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                91 => {
                    rrc_inactive_transition_report_request = Some(
                        RrcInactiveTransitionReportRequest::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                162 => {
                    new_guami = Some(Guami::from_aper(decoder, UNCONSTRAINED)?);
                }
                165 => {
                    cn_assisted_ran_tuning =
                        Some(CnAssistedRanTuning::from_aper(decoder, UNCONSTRAINED)?);
                }
                177 => {
                    srvcc_operation_possible =
                        Some(SrvccOperationPossible::from_aper(decoder, UNCONSTRAINED)?);
                }
                199 => {
                    iab_authorized = Some(IabAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                216 => {
                    nrv2x_services_authorized =
                        Some(Nrv2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                215 => {
                    ltev2x_services_authorized =
                        Some(Ltev2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                218 => {
                    nrue_sidelink_aggregate_maximum_bitrate = Some(
                        NrueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                217 => {
                    lteue_sidelink_aggregate_maximum_bitrate = Some(
                        LteueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                219 => {
                    pc5_qos_parameters = Some(Pc5QosParameters::from_aper(decoder, UNCONSTRAINED)?);
                }
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                238 => {
                    rg_level_wireline_access_characteristics = Some(
                        RgLevelWirelineAccessCharacteristics::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ran_paging_priority,
            security_key,
            index_to_rfsp,
            ue_aggregate_maximum_bit_rate,
            ue_security_capabilities,
            core_network_assistance_information_for_inactive,
            emergency_fallback_indicator,
            new_amf_ue_ngap_id,
            rrc_inactive_transition_report_request,
            new_guami,
            cn_assisted_ran_tuning,
            srvcc_operation_possible,
            iab_authorized,
            nrv2x_services_authorized,
            ltev2x_services_authorized,
            nrue_sidelink_aggregate_maximum_bitrate,
            lteue_sidelink_aggregate_maximum_bitrate,
            pc5_qos_parameters,
            ue_radio_capability_id,
            rg_level_wireline_access_characteristics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ran_paging_priority.is_some(),
            self.security_key.is_some(),
            self.index_to_rfsp.is_some(),
            self.ue_aggregate_maximum_bit_rate.is_some(),
            self.ue_security_capabilities.is_some(),
            self.core_network_assistance_information_for_inactive
                .is_some(),
            self.emergency_fallback_indicator.is_some(),
            self.new_amf_ue_ngap_id.is_some(),
            self.rrc_inactive_transition_report_request.is_some(),
            self.new_guami.is_some(),
            self.cn_assisted_ran_tuning.is_some(),
            self.srvcc_operation_possible.is_some(),
            self.iab_authorized.is_some(),
            self.nrv2x_services_authorized.is_some(),
            self.ltev2x_services_authorized.is_some(),
            self.nrue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.lteue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.pc5_qos_parameters.is_some(),
            self.ue_radio_capability_id.is_some(),
            self.rg_level_wireline_access_characteristics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ran_paging_priority {
            (83 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.security_key {
            (94 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.index_to_rfsp {
            (31 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_aggregate_maximum_bit_rate {
            (110 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_security_capabilities {
            (119 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.core_network_assistance_information_for_inactive {
            (18 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.emergency_fallback_indicator {
            (24 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.new_amf_ue_ngap_id {
            (40 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.rrc_inactive_transition_report_request {
            (91 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.new_guami {
            (162 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.cn_assisted_ran_tuning {
            (165 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.srvcc_operation_possible {
            (177 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.iab_authorized {
            (199 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrv2x_services_authorized {
            (216 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ltev2x_services_authorized {
            (215 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrue_sidelink_aggregate_maximum_bitrate {
            (218 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.lteue_sidelink_aggregate_maximum_bitrate {
            (217 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pc5_qos_parameters {
            (219 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_id {
            (264 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.rg_level_wireline_access_characteristics {
            (238 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextModificationResponse
#[derive(Clone)]
pub struct UeContextModificationResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub rrc_state: Option<RrcState>,
    pub user_location_information: Option<UserLocationInformation>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeContextModificationResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut rrc_state: Option<RrcState> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                92 => {
                    rrc_state = Some(RrcState::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            rrc_state,
            user_location_information,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.rrc_state.is_some(),
            self.user_location_information.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.rrc_state {
            (92 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.user_location_information {
            (121 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeContextModificationFailure
#[derive(Clone)]
pub struct UeContextModificationFailure {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub cause: Cause,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeContextModificationFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut cause: Option<Cause> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            cause,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// RrcInactiveTransitionReport
#[derive(Clone)]
pub struct RrcInactiveTransitionReport {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub rrc_state: RrcState,
    pub user_location_information: UserLocationInformation,
}

impl APerElement for RrcInactiveTransitionReport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut rrc_state: Option<RrcState> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                92 => {
                    rrc_state = Some(RrcState::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let rrc_state = rrc_state.ok_or(DecodeError::InvalidChoice)?;
        let user_location_information =
            user_location_information.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            rrc_state,
            user_location_information,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (92 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.rrc_state.to_aper(enc, UNCONSTRAINED)?;
        (121 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.user_location_information.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// RetrieveUeInformation
#[derive(Clone)]
pub struct RetrieveUeInformation {
    pub five_g_s_tmsi: FiveGSTmsi,
}

impl APerElement for RetrieveUeInformation {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut five_g_s_tmsi: Option<FiveGSTmsi> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                26 => {
                    five_g_s_tmsi = Some(FiveGSTmsi::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let five_g_s_tmsi = five_g_s_tmsi.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self { five_g_s_tmsi })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (26 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.five_g_s_tmsi.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UeInformationTransfer
#[derive(Clone)]
pub struct UeInformationTransfer {
    pub five_g_s_tmsi: FiveGSTmsi,
    pub nb_iot_ue_priority: Option<NbIotUePriority>,
    pub ue_radio_capability: Option<UeRadioCapability>,
    pub s_nssai: Option<SNssai>,
    pub allowed_nssai: Option<AllowedNssai>,
    pub ue_differentiation_info: Option<UeDifferentiationInfo>,
}

impl APerElement for UeInformationTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut five_g_s_tmsi: Option<FiveGSTmsi> = None;
        let mut nb_iot_ue_priority: Option<NbIotUePriority> = None;
        let mut ue_radio_capability: Option<UeRadioCapability> = None;
        let mut s_nssai: Option<SNssai> = None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut ue_differentiation_info: Option<UeDifferentiationInfo> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                26 => {
                    five_g_s_tmsi = Some(FiveGSTmsi::from_aper(decoder, UNCONSTRAINED)?);
                }
                210 => {
                    nb_iot_ue_priority = Some(NbIotUePriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                117 => {
                    ue_radio_capability =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                148 => {
                    s_nssai = Some(SNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                209 => {
                    ue_differentiation_info =
                        Some(UeDifferentiationInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let five_g_s_tmsi = five_g_s_tmsi.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            five_g_s_tmsi,
            nb_iot_ue_priority,
            ue_radio_capability,
            s_nssai,
            allowed_nssai,
            ue_differentiation_info,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.nb_iot_ue_priority.is_some(),
            self.ue_radio_capability.is_some(),
            self.s_nssai.is_some(),
            self.allowed_nssai.is_some(),
            self.ue_differentiation_info.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (26 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.five_g_s_tmsi.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.nb_iot_ue_priority {
            (210 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability {
            (117 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.s_nssai {
            (148 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.allowed_nssai {
            (0 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_differentiation_info {
            (209 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// RancpRelocationIndication
#[derive(Clone)]
pub struct RancpRelocationIndication {
    pub ran_ue_ngap_id: RanUeNgapId,
    pub five_g_s_tmsi: FiveGSTmsi,
    pub eutra_cgi: EutraCgi,
    pub tai: Tai,
    pub ul_cp_security_information: UlCpSecurityInformation,
}

impl APerElement for RancpRelocationIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut five_g_s_tmsi: Option<FiveGSTmsi> = None;
        let mut eutra_cgi: Option<EutraCgi> = None;
        let mut tai: Option<Tai> = None;
        let mut ul_cp_security_information: Option<UlCpSecurityInformation> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                26 => {
                    five_g_s_tmsi = Some(FiveGSTmsi::from_aper(decoder, UNCONSTRAINED)?);
                }
                25 => {
                    eutra_cgi = Some(EutraCgi::from_aper(decoder, UNCONSTRAINED)?);
                }
                213 => {
                    tai = Some(Tai::from_aper(decoder, UNCONSTRAINED)?);
                }
                211 => {
                    ul_cp_security_information =
                        Some(UlCpSecurityInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let five_g_s_tmsi = five_g_s_tmsi.ok_or(DecodeError::InvalidChoice)?;
        let eutra_cgi = eutra_cgi.ok_or(DecodeError::InvalidChoice)?;
        let tai = tai.ok_or(DecodeError::InvalidChoice)?;
        let ul_cp_security_information =
            ul_cp_security_information.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ran_ue_ngap_id,
            five_g_s_tmsi,
            eutra_cgi,
            tai,
            ul_cp_security_information,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (26 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.five_g_s_tmsi.to_aper(enc, UNCONSTRAINED)?;
        (25 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.eutra_cgi.to_aper(enc, UNCONSTRAINED)?;
        (213 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.tai.to_aper(enc, UNCONSTRAINED)?;
        (211 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ul_cp_security_information
            .to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// HandoverRequired
#[derive(Clone)]
pub struct HandoverRequired {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub handover_type: HandoverType,
    pub cause: Cause,
    pub target_id: TargetId,
    pub direct_forwarding_path_availability: Option<DirectForwardingPathAvailability>,
    pub pdu_session_resource_list_ho_rqd: PduSessionResourceListHoRqd,
    pub source_to_target_transparent_container: SourceToTargetTransparentContainer,
}

impl APerElement for HandoverRequired {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut handover_type: Option<HandoverType> = None;
        let mut cause: Option<Cause> = None;
        let mut target_id: Option<TargetId> = None;
        let mut direct_forwarding_path_availability: Option<DirectForwardingPathAvailability> =
            None;
        let mut pdu_session_resource_list_ho_rqd: Option<PduSessionResourceListHoRqd> = None;
        let mut source_to_target_transparent_container: Option<SourceToTargetTransparentContainer> =
            None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                29 => {
                    handover_type = Some(HandoverType::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                105 => {
                    target_id = Some(TargetId::from_aper(decoder, UNCONSTRAINED)?);
                }
                22 => {
                    direct_forwarding_path_availability = Some(
                        DirectForwardingPathAvailability::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                61 => {
                    pdu_session_resource_list_ho_rqd = Some(
                        PduSessionResourceListHoRqd::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                101 => {
                    source_to_target_transparent_container = Some(
                        SourceToTargetTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let handover_type = handover_type.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        let target_id = target_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_list_ho_rqd =
            pdu_session_resource_list_ho_rqd.ok_or(DecodeError::InvalidChoice)?;
        let source_to_target_transparent_container =
            source_to_target_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            handover_type,
            cause,
            target_id,
            direct_forwarding_path_availability,
            pdu_session_resource_list_ho_rqd,
            source_to_target_transparent_container,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.direct_forwarding_path_availability.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (29 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.handover_type.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        (105 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.target_id.to_aper(enc, UNCONSTRAINED)?;
        (61 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_list_ho_rqd
            .to_aper(enc, UNCONSTRAINED)?;
        (101 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.source_to_target_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.direct_forwarding_path_availability {
            (22 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverCommand
#[derive(Clone)]
pub struct HandoverCommand {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub handover_type: HandoverType,
    pub nas_security_parameters_from_ngran: Option<NasSecurityParametersFromNgran>,
    pub pdu_session_resource_handover_list: Option<PduSessionResourceHandoverList>,
    pub pdu_session_resource_to_release_list_ho_cmd: Option<PduSessionResourceToReleaseListHoCmd>,
    pub target_to_source_transparent_container: TargetToSourceTransparentContainer,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for HandoverCommand {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut handover_type: Option<HandoverType> = None;
        let mut nas_security_parameters_from_ngran: Option<NasSecurityParametersFromNgran> = None;
        let mut pdu_session_resource_handover_list: Option<PduSessionResourceHandoverList> = None;
        let mut pdu_session_resource_to_release_list_ho_cmd: Option<
            PduSessionResourceToReleaseListHoCmd,
        > = None;
        let mut target_to_source_transparent_container: Option<TargetToSourceTransparentContainer> =
            None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                29 => {
                    handover_type = Some(HandoverType::from_aper(decoder, UNCONSTRAINED)?);
                }
                39 => {
                    nas_security_parameters_from_ngran = Some(
                        NasSecurityParametersFromNgran::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                59 => {
                    pdu_session_resource_handover_list = Some(
                        PduSessionResourceHandoverList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                78 => {
                    pdu_session_resource_to_release_list_ho_cmd = Some(
                        PduSessionResourceToReleaseListHoCmd::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                106 => {
                    target_to_source_transparent_container = Some(
                        TargetToSourceTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let handover_type = handover_type.ok_or(DecodeError::InvalidChoice)?;
        let target_to_source_transparent_container =
            target_to_source_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            handover_type,
            nas_security_parameters_from_ngran,
            pdu_session_resource_handover_list,
            pdu_session_resource_to_release_list_ho_cmd,
            target_to_source_transparent_container,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.nas_security_parameters_from_ngran.is_some(),
            self.pdu_session_resource_handover_list.is_some(),
            self.pdu_session_resource_to_release_list_ho_cmd.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (29 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.handover_type.to_aper(enc, UNCONSTRAINED)?;
        (106 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.target_to_source_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.nas_security_parameters_from_ngran {
            (39 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_handover_list {
            (59 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_to_release_list_ho_cmd {
            (78 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverPreparationFailure
#[derive(Clone)]
pub struct HandoverPreparationFailure {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub cause: Cause,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
    pub targetto_source_failure_transparent_container:
        Option<TargettoSourceFailureTransparentContainer>,
}

impl APerElement for HandoverPreparationFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut cause: Option<Cause> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;
        let mut targetto_source_failure_transparent_container: Option<
            TargettoSourceFailureTransparentContainer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                262 => {
                    targetto_source_failure_transparent_container =
                        Some(TargettoSourceFailureTransparentContainer::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            cause,
            criticality_diagnostics,
            targetto_source_failure_transparent_container,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.criticality_diagnostics.is_some(),
            self.targetto_source_failure_transparent_container.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.targetto_source_failure_transparent_container {
            (262 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverRequest
#[derive(Clone)]
pub struct HandoverRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub handover_type: HandoverType,
    pub cause: Cause,
    pub ue_aggregate_maximum_bit_rate: UeAggregateMaximumBitRate,
    pub core_network_assistance_information_for_inactive:
        Option<CoreNetworkAssistanceInformationForInactive>,
    pub ue_security_capabilities: UeSecurityCapabilities,
    pub security_context: SecurityContext,
    pub new_security_context_ind: Option<NewSecurityContextInd>,
    pub nasc: Option<NasPdu>,
    pub pdu_session_resource_setup_list_ho_req: PduSessionResourceSetupListHoReq,
    pub allowed_nssai: AllowedNssai,
    pub trace_activation: Option<TraceActivation>,
    pub masked_imeisv: Option<MaskedImeisv>,
    pub source_to_target_transparent_container: SourceToTargetTransparentContainer,
    pub mobility_restriction_list: Option<MobilityRestrictionList>,
    pub location_reporting_request_type: Option<LocationReportingRequestType>,
    pub rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest>,
    pub guami: Guami,
    pub redirection_voice_fallback: Option<RedirectionVoiceFallback>,
    pub cn_assisted_ran_tuning: Option<CnAssistedRanTuning>,
    pub srvcc_operation_possible: Option<SrvccOperationPossible>,
    pub iab_authorized: Option<IabAuthorized>,
    pub enhanced_coverage_restriction: Option<EnhancedCoverageRestriction>,
    pub ue_differentiation_info: Option<UeDifferentiationInfo>,
    pub nrv2x_services_authorized: Option<Nrv2xServicesAuthorized>,
    pub ltev2x_services_authorized: Option<Ltev2xServicesAuthorized>,
    pub nrue_sidelink_aggregate_maximum_bitrate: Option<NrueSidelinkAggregateMaximumBitrate>,
    pub lteue_sidelink_aggregate_maximum_bitrate: Option<LteueSidelinkAggregateMaximumBitrate>,
    pub pc5_qos_parameters: Option<Pc5QosParameters>,
    pub c_emode_brestricted: Option<CEmodeBrestricted>,
    pub ue_up_c_iot_support: Option<UeUpCIotSupport>,
    pub management_based_mdt_plmn_list: Option<MdtPlmnList>,
    pub ue_radio_capability_id: Option<UeRadioCapabilityId>,
    pub extended_connected_time: Option<ExtendedConnectedTime>,
}

impl APerElement for HandoverRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut handover_type: Option<HandoverType> = None;
        let mut cause: Option<Cause> = None;
        let mut ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate> = None;
        let mut core_network_assistance_information_for_inactive: Option<
            CoreNetworkAssistanceInformationForInactive,
        > = None;
        let mut ue_security_capabilities: Option<UeSecurityCapabilities> = None;
        let mut security_context: Option<SecurityContext> = None;
        let mut new_security_context_ind: Option<NewSecurityContextInd> = None;
        let mut nasc: Option<NasPdu> = None;
        let mut pdu_session_resource_setup_list_ho_req: Option<PduSessionResourceSetupListHoReq> =
            None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut trace_activation: Option<TraceActivation> = None;
        let mut masked_imeisv: Option<MaskedImeisv> = None;
        let mut source_to_target_transparent_container: Option<SourceToTargetTransparentContainer> =
            None;
        let mut mobility_restriction_list: Option<MobilityRestrictionList> = None;
        let mut location_reporting_request_type: Option<LocationReportingRequestType> = None;
        let mut rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest> =
            None;
        let mut guami: Option<Guami> = None;
        let mut redirection_voice_fallback: Option<RedirectionVoiceFallback> = None;
        let mut cn_assisted_ran_tuning: Option<CnAssistedRanTuning> = None;
        let mut srvcc_operation_possible: Option<SrvccOperationPossible> = None;
        let mut iab_authorized: Option<IabAuthorized> = None;
        let mut enhanced_coverage_restriction: Option<EnhancedCoverageRestriction> = None;
        let mut ue_differentiation_info: Option<UeDifferentiationInfo> = None;
        let mut nrv2x_services_authorized: Option<Nrv2xServicesAuthorized> = None;
        let mut ltev2x_services_authorized: Option<Ltev2xServicesAuthorized> = None;
        let mut nrue_sidelink_aggregate_maximum_bitrate: Option<
            NrueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut lteue_sidelink_aggregate_maximum_bitrate: Option<
            LteueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut pc5_qos_parameters: Option<Pc5QosParameters> = None;
        let mut c_emode_brestricted: Option<CEmodeBrestricted> = None;
        let mut ue_up_c_iot_support: Option<UeUpCIotSupport> = None;
        let mut management_based_mdt_plmn_list: Option<MdtPlmnList> = None;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;
        let mut extended_connected_time: Option<ExtendedConnectedTime> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                29 => {
                    handover_type = Some(HandoverType::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                110 => {
                    ue_aggregate_maximum_bit_rate = Some(UeAggregateMaximumBitRate::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                18 => {
                    core_network_assistance_information_for_inactive =
                        Some(CoreNetworkAssistanceInformationForInactive::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                119 => {
                    ue_security_capabilities =
                        Some(UeSecurityCapabilities::from_aper(decoder, UNCONSTRAINED)?);
                }
                93 => {
                    security_context = Some(SecurityContext::from_aper(decoder, UNCONSTRAINED)?);
                }
                41 => {
                    new_security_context_ind =
                        Some(NewSecurityContextInd::from_aper(decoder, UNCONSTRAINED)?);
                }
                37 => {
                    nasc = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                73 => {
                    pdu_session_resource_setup_list_ho_req = Some(
                        PduSessionResourceSetupListHoReq::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                108 => {
                    trace_activation = Some(TraceActivation::from_aper(decoder, UNCONSTRAINED)?);
                }
                34 => {
                    masked_imeisv = Some(MaskedImeisv::from_aper(decoder, UNCONSTRAINED)?);
                }
                101 => {
                    source_to_target_transparent_container = Some(
                        SourceToTargetTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                36 => {
                    mobility_restriction_list =
                        Some(MobilityRestrictionList::from_aper(decoder, UNCONSTRAINED)?);
                }
                33 => {
                    location_reporting_request_type = Some(
                        LocationReportingRequestType::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                91 => {
                    rrc_inactive_transition_report_request = Some(
                        RrcInactiveTransitionReportRequest::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                28 => {
                    guami = Some(Guami::from_aper(decoder, UNCONSTRAINED)?);
                }
                146 => {
                    redirection_voice_fallback =
                        Some(RedirectionVoiceFallback::from_aper(decoder, UNCONSTRAINED)?);
                }
                165 => {
                    cn_assisted_ran_tuning =
                        Some(CnAssistedRanTuning::from_aper(decoder, UNCONSTRAINED)?);
                }
                177 => {
                    srvcc_operation_possible =
                        Some(SrvccOperationPossible::from_aper(decoder, UNCONSTRAINED)?);
                }
                199 => {
                    iab_authorized = Some(IabAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                205 => {
                    enhanced_coverage_restriction = Some(EnhancedCoverageRestriction::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                209 => {
                    ue_differentiation_info =
                        Some(UeDifferentiationInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                216 => {
                    nrv2x_services_authorized =
                        Some(Nrv2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                215 => {
                    ltev2x_services_authorized =
                        Some(Ltev2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                218 => {
                    nrue_sidelink_aggregate_maximum_bitrate = Some(
                        NrueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                217 => {
                    lteue_sidelink_aggregate_maximum_bitrate = Some(
                        LteueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                219 => {
                    pc5_qos_parameters = Some(Pc5QosParameters::from_aper(decoder, UNCONSTRAINED)?);
                }
                222 => {
                    c_emode_brestricted =
                        Some(CEmodeBrestricted::from_aper(decoder, UNCONSTRAINED)?);
                }
                234 => {
                    ue_up_c_iot_support = Some(UeUpCIotSupport::from_aper(decoder, UNCONSTRAINED)?);
                }
                254 => {
                    management_based_mdt_plmn_list =
                        Some(MdtPlmnList::from_aper(decoder, UNCONSTRAINED)?);
                }
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                206 => {
                    extended_connected_time =
                        Some(ExtendedConnectedTime::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let handover_type = handover_type.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        let ue_aggregate_maximum_bit_rate =
            ue_aggregate_maximum_bit_rate.ok_or(DecodeError::InvalidChoice)?;
        let ue_security_capabilities =
            ue_security_capabilities.ok_or(DecodeError::InvalidChoice)?;
        let security_context = security_context.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_setup_list_ho_req =
            pdu_session_resource_setup_list_ho_req.ok_or(DecodeError::InvalidChoice)?;
        let allowed_nssai = allowed_nssai.ok_or(DecodeError::InvalidChoice)?;
        let source_to_target_transparent_container =
            source_to_target_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        let guami = guami.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            handover_type,
            cause,
            ue_aggregate_maximum_bit_rate,
            core_network_assistance_information_for_inactive,
            ue_security_capabilities,
            security_context,
            new_security_context_ind,
            nasc,
            pdu_session_resource_setup_list_ho_req,
            allowed_nssai,
            trace_activation,
            masked_imeisv,
            source_to_target_transparent_container,
            mobility_restriction_list,
            location_reporting_request_type,
            rrc_inactive_transition_report_request,
            guami,
            redirection_voice_fallback,
            cn_assisted_ran_tuning,
            srvcc_operation_possible,
            iab_authorized,
            enhanced_coverage_restriction,
            ue_differentiation_info,
            nrv2x_services_authorized,
            ltev2x_services_authorized,
            nrue_sidelink_aggregate_maximum_bitrate,
            lteue_sidelink_aggregate_maximum_bitrate,
            pc5_qos_parameters,
            c_emode_brestricted,
            ue_up_c_iot_support,
            management_based_mdt_plmn_list,
            ue_radio_capability_id,
            extended_connected_time,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.core_network_assistance_information_for_inactive
                .is_some(),
            self.new_security_context_ind.is_some(),
            self.nasc.is_some(),
            self.trace_activation.is_some(),
            self.masked_imeisv.is_some(),
            self.mobility_restriction_list.is_some(),
            self.location_reporting_request_type.is_some(),
            self.rrc_inactive_transition_report_request.is_some(),
            self.redirection_voice_fallback.is_some(),
            self.cn_assisted_ran_tuning.is_some(),
            self.srvcc_operation_possible.is_some(),
            self.iab_authorized.is_some(),
            self.enhanced_coverage_restriction.is_some(),
            self.ue_differentiation_info.is_some(),
            self.nrv2x_services_authorized.is_some(),
            self.ltev2x_services_authorized.is_some(),
            self.nrue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.lteue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.pc5_qos_parameters.is_some(),
            self.c_emode_brestricted.is_some(),
            self.ue_up_c_iot_support.is_some(),
            self.management_based_mdt_plmn_list.is_some(),
            self.ue_radio_capability_id.is_some(),
            self.extended_connected_time.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (29 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.handover_type.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        (110 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ue_aggregate_maximum_bit_rate
            .to_aper(enc, UNCONSTRAINED)?;
        (119 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ue_security_capabilities.to_aper(enc, UNCONSTRAINED)?;
        (93 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.security_context.to_aper(enc, UNCONSTRAINED)?;
        (73 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_setup_list_ho_req
            .to_aper(enc, UNCONSTRAINED)?;
        (0 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.allowed_nssai.to_aper(enc, UNCONSTRAINED)?;
        (101 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.source_to_target_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;
        (28 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.guami.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.core_network_assistance_information_for_inactive {
            (18 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.new_security_context_ind {
            (41 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nasc {
            (37 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.trace_activation {
            (108 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.masked_imeisv {
            (34 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.mobility_restriction_list {
            (36 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.location_reporting_request_type {
            (33 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.rrc_inactive_transition_report_request {
            (91 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.redirection_voice_fallback {
            (146 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.cn_assisted_ran_tuning {
            (165 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.srvcc_operation_possible {
            (177 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.iab_authorized {
            (199 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.enhanced_coverage_restriction {
            (205 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_differentiation_info {
            (209 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrv2x_services_authorized {
            (216 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ltev2x_services_authorized {
            (215 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrue_sidelink_aggregate_maximum_bitrate {
            (218 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.lteue_sidelink_aggregate_maximum_bitrate {
            (217 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pc5_qos_parameters {
            (219 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.c_emode_brestricted {
            (222 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_up_c_iot_support {
            (234 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.management_based_mdt_plmn_list {
            (254 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_id {
            (264 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_connected_time {
            (206 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverRequestAcknowledge
#[derive(Clone)]
pub struct HandoverRequestAcknowledge {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_admitted_list: PduSessionResourceAdmittedList,
    pub pdu_session_resource_failed_to_setup_list_ho_ack:
        Option<PduSessionResourceFailedToSetupListHoAck>,
    pub target_to_source_transparent_container: TargetToSourceTransparentContainer,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for HandoverRequestAcknowledge {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_admitted_list: Option<PduSessionResourceAdmittedList> = None;
        let mut pdu_session_resource_failed_to_setup_list_ho_ack: Option<
            PduSessionResourceFailedToSetupListHoAck,
        > = None;
        let mut target_to_source_transparent_container: Option<TargetToSourceTransparentContainer> =
            None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                53 => {
                    pdu_session_resource_admitted_list = Some(
                        PduSessionResourceAdmittedList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                56 => {
                    pdu_session_resource_failed_to_setup_list_ho_ack =
                        Some(PduSessionResourceFailedToSetupListHoAck::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                106 => {
                    target_to_source_transparent_container = Some(
                        TargetToSourceTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_admitted_list =
            pdu_session_resource_admitted_list.ok_or(DecodeError::InvalidChoice)?;
        let target_to_source_transparent_container =
            target_to_source_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_admitted_list,
            pdu_session_resource_failed_to_setup_list_ho_ack,
            target_to_source_transparent_container,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_failed_to_setup_list_ho_ack
                .is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (53 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_admitted_list
            .to_aper(enc, UNCONSTRAINED)?;
        (106 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.target_to_source_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_failed_to_setup_list_ho_ack {
            (56 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverFailure
#[derive(Clone)]
pub struct HandoverFailure {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub cause: Cause,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
    pub targetto_source_failure_transparent_container:
        Option<TargettoSourceFailureTransparentContainer>,
}

impl APerElement for HandoverFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut cause: Option<Cause> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;
        let mut targetto_source_failure_transparent_container: Option<
            TargettoSourceFailureTransparentContainer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                262 => {
                    targetto_source_failure_transparent_container =
                        Some(TargettoSourceFailureTransparentContainer::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            cause,
            criticality_diagnostics,
            targetto_source_failure_transparent_container,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.criticality_diagnostics.is_some(),
            self.targetto_source_failure_transparent_container.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.targetto_source_failure_transparent_container {
            (262 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverNotify
#[derive(Clone)]
pub struct HandoverNotify {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub user_location_information: UserLocationInformation,
    pub notify_source_ngran_node: Option<NotifySourceNgranNode>,
}

impl APerElement for HandoverNotify {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut notify_source_ngran_node: Option<NotifySourceNgranNode> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                269 => {
                    notify_source_ngran_node =
                        Some(NotifySourceNgranNode::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let user_location_information =
            user_location_information.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            user_location_information,
            notify_source_ngran_node,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.notify_source_ngran_node.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (121 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.user_location_information.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.notify_source_ngran_node {
            (269 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PathSwitchRequest
#[derive(Clone)]
pub struct PathSwitchRequest {
    pub ran_ue_ngap_id: RanUeNgapId,
    pub source_amf_ue_ngap_id: AmfUeNgapId,
    pub user_location_information: UserLocationInformation,
    pub ue_security_capabilities: UeSecurityCapabilities,
    pub pdu_session_resource_to_be_switched_dl_list: PduSessionResourceToBeSwitchedDlList,
    pub pdu_session_resource_failed_to_setup_list_ps_req:
        Option<PduSessionResourceFailedToSetupListPsReq>,
    pub rrc_resume_cause: Option<RrcEstablishmentCause>,
}

impl APerElement for PathSwitchRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut source_amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut ue_security_capabilities: Option<UeSecurityCapabilities> = None;
        let mut pdu_session_resource_to_be_switched_dl_list: Option<
            PduSessionResourceToBeSwitchedDlList,
        > = None;
        let mut pdu_session_resource_failed_to_setup_list_ps_req: Option<
            PduSessionResourceFailedToSetupListPsReq,
        > = None;
        let mut rrc_resume_cause: Option<RrcEstablishmentCause> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                100 => {
                    source_amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                119 => {
                    ue_security_capabilities =
                        Some(UeSecurityCapabilities::from_aper(decoder, UNCONSTRAINED)?);
                }
                76 => {
                    pdu_session_resource_to_be_switched_dl_list = Some(
                        PduSessionResourceToBeSwitchedDlList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                57 => {
                    pdu_session_resource_failed_to_setup_list_ps_req =
                        Some(PduSessionResourceFailedToSetupListPsReq::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                237 => {
                    rrc_resume_cause =
                        Some(RrcEstablishmentCause::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let source_amf_ue_ngap_id = source_amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let user_location_information =
            user_location_information.ok_or(DecodeError::InvalidChoice)?;
        let ue_security_capabilities =
            ue_security_capabilities.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_to_be_switched_dl_list =
            pdu_session_resource_to_be_switched_dl_list.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ran_ue_ngap_id,
            source_amf_ue_ngap_id,
            user_location_information,
            ue_security_capabilities,
            pdu_session_resource_to_be_switched_dl_list,
            pdu_session_resource_failed_to_setup_list_ps_req,
            rrc_resume_cause,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.pdu_session_resource_failed_to_setup_list_ps_req
                .is_some(),
            self.rrc_resume_cause.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (100 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.source_amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (121 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.user_location_information.to_aper(enc, UNCONSTRAINED)?;
        (119 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ue_security_capabilities.to_aper(enc, UNCONSTRAINED)?;
        (76 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_to_be_switched_dl_list
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.pdu_session_resource_failed_to_setup_list_ps_req {
            (57 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.rrc_resume_cause {
            (237 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PathSwitchRequestAcknowledge
#[derive(Clone)]
pub struct PathSwitchRequestAcknowledge {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ue_security_capabilities: Option<UeSecurityCapabilities>,
    pub security_context: SecurityContext,
    pub new_security_context_ind: Option<NewSecurityContextInd>,
    pub pdu_session_resource_switched_list: PduSessionResourceSwitchedList,
    pub pdu_session_resource_released_list_ps_ack: Option<PduSessionResourceReleasedListPsAck>,
    pub allowed_nssai: AllowedNssai,
    pub core_network_assistance_information_for_inactive:
        Option<CoreNetworkAssistanceInformationForInactive>,
    pub rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
    pub redirection_voice_fallback: Option<RedirectionVoiceFallback>,
    pub cn_assisted_ran_tuning: Option<CnAssistedRanTuning>,
    pub srvcc_operation_possible: Option<SrvccOperationPossible>,
    pub enhanced_coverage_restriction: Option<EnhancedCoverageRestriction>,
    pub extended_connected_time: Option<ExtendedConnectedTime>,
    pub ue_differentiation_info: Option<UeDifferentiationInfo>,
    pub nrv2x_services_authorized: Option<Nrv2xServicesAuthorized>,
    pub ltev2x_services_authorized: Option<Ltev2xServicesAuthorized>,
    pub nrue_sidelink_aggregate_maximum_bitrate: Option<NrueSidelinkAggregateMaximumBitrate>,
    pub lteue_sidelink_aggregate_maximum_bitrate: Option<LteueSidelinkAggregateMaximumBitrate>,
    pub pc5_qos_parameters: Option<Pc5QosParameters>,
    pub c_emode_brestricted: Option<CEmodeBrestricted>,
    pub ue_up_c_iot_support: Option<UeUpCIotSupport>,
    pub ue_radio_capability_id: Option<UeRadioCapabilityId>,
}

impl APerElement for PathSwitchRequestAcknowledge {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ue_security_capabilities: Option<UeSecurityCapabilities> = None;
        let mut security_context: Option<SecurityContext> = None;
        let mut new_security_context_ind: Option<NewSecurityContextInd> = None;
        let mut pdu_session_resource_switched_list: Option<PduSessionResourceSwitchedList> = None;
        let mut pdu_session_resource_released_list_ps_ack: Option<
            PduSessionResourceReleasedListPsAck,
        > = None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut core_network_assistance_information_for_inactive: Option<
            CoreNetworkAssistanceInformationForInactive,
        > = None;
        let mut rrc_inactive_transition_report_request: Option<RrcInactiveTransitionReportRequest> =
            None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;
        let mut redirection_voice_fallback: Option<RedirectionVoiceFallback> = None;
        let mut cn_assisted_ran_tuning: Option<CnAssistedRanTuning> = None;
        let mut srvcc_operation_possible: Option<SrvccOperationPossible> = None;
        let mut enhanced_coverage_restriction: Option<EnhancedCoverageRestriction> = None;
        let mut extended_connected_time: Option<ExtendedConnectedTime> = None;
        let mut ue_differentiation_info: Option<UeDifferentiationInfo> = None;
        let mut nrv2x_services_authorized: Option<Nrv2xServicesAuthorized> = None;
        let mut ltev2x_services_authorized: Option<Ltev2xServicesAuthorized> = None;
        let mut nrue_sidelink_aggregate_maximum_bitrate: Option<
            NrueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut lteue_sidelink_aggregate_maximum_bitrate: Option<
            LteueSidelinkAggregateMaximumBitrate,
        > = None;
        let mut pc5_qos_parameters: Option<Pc5QosParameters> = None;
        let mut c_emode_brestricted: Option<CEmodeBrestricted> = None;
        let mut ue_up_c_iot_support: Option<UeUpCIotSupport> = None;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                119 => {
                    ue_security_capabilities =
                        Some(UeSecurityCapabilities::from_aper(decoder, UNCONSTRAINED)?);
                }
                93 => {
                    security_context = Some(SecurityContext::from_aper(decoder, UNCONSTRAINED)?);
                }
                41 => {
                    new_security_context_ind =
                        Some(NewSecurityContextInd::from_aper(decoder, UNCONSTRAINED)?);
                }
                77 => {
                    pdu_session_resource_switched_list = Some(
                        PduSessionResourceSwitchedList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                68 => {
                    pdu_session_resource_released_list_ps_ack = Some(
                        PduSessionResourceReleasedListPsAck::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                18 => {
                    core_network_assistance_information_for_inactive =
                        Some(CoreNetworkAssistanceInformationForInactive::from_aper(
                            decoder,
                            UNCONSTRAINED,
                        )?);
                }
                91 => {
                    rrc_inactive_transition_report_request = Some(
                        RrcInactiveTransitionReportRequest::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                146 => {
                    redirection_voice_fallback =
                        Some(RedirectionVoiceFallback::from_aper(decoder, UNCONSTRAINED)?);
                }
                165 => {
                    cn_assisted_ran_tuning =
                        Some(CnAssistedRanTuning::from_aper(decoder, UNCONSTRAINED)?);
                }
                177 => {
                    srvcc_operation_possible =
                        Some(SrvccOperationPossible::from_aper(decoder, UNCONSTRAINED)?);
                }
                205 => {
                    enhanced_coverage_restriction = Some(EnhancedCoverageRestriction::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                206 => {
                    extended_connected_time =
                        Some(ExtendedConnectedTime::from_aper(decoder, UNCONSTRAINED)?);
                }
                209 => {
                    ue_differentiation_info =
                        Some(UeDifferentiationInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                216 => {
                    nrv2x_services_authorized =
                        Some(Nrv2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                215 => {
                    ltev2x_services_authorized =
                        Some(Ltev2xServicesAuthorized::from_aper(decoder, UNCONSTRAINED)?);
                }
                218 => {
                    nrue_sidelink_aggregate_maximum_bitrate = Some(
                        NrueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                217 => {
                    lteue_sidelink_aggregate_maximum_bitrate = Some(
                        LteueSidelinkAggregateMaximumBitrate::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                219 => {
                    pc5_qos_parameters = Some(Pc5QosParameters::from_aper(decoder, UNCONSTRAINED)?);
                }
                222 => {
                    c_emode_brestricted =
                        Some(CEmodeBrestricted::from_aper(decoder, UNCONSTRAINED)?);
                }
                234 => {
                    ue_up_c_iot_support = Some(UeUpCIotSupport::from_aper(decoder, UNCONSTRAINED)?);
                }
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let security_context = security_context.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_switched_list =
            pdu_session_resource_switched_list.ok_or(DecodeError::InvalidChoice)?;
        let allowed_nssai = allowed_nssai.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ue_security_capabilities,
            security_context,
            new_security_context_ind,
            pdu_session_resource_switched_list,
            pdu_session_resource_released_list_ps_ack,
            allowed_nssai,
            core_network_assistance_information_for_inactive,
            rrc_inactive_transition_report_request,
            criticality_diagnostics,
            redirection_voice_fallback,
            cn_assisted_ran_tuning,
            srvcc_operation_possible,
            enhanced_coverage_restriction,
            extended_connected_time,
            ue_differentiation_info,
            nrv2x_services_authorized,
            ltev2x_services_authorized,
            nrue_sidelink_aggregate_maximum_bitrate,
            lteue_sidelink_aggregate_maximum_bitrate,
            pc5_qos_parameters,
            c_emode_brestricted,
            ue_up_c_iot_support,
            ue_radio_capability_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ue_security_capabilities.is_some(),
            self.new_security_context_ind.is_some(),
            self.pdu_session_resource_released_list_ps_ack.is_some(),
            self.core_network_assistance_information_for_inactive
                .is_some(),
            self.rrc_inactive_transition_report_request.is_some(),
            self.criticality_diagnostics.is_some(),
            self.redirection_voice_fallback.is_some(),
            self.cn_assisted_ran_tuning.is_some(),
            self.srvcc_operation_possible.is_some(),
            self.enhanced_coverage_restriction.is_some(),
            self.extended_connected_time.is_some(),
            self.ue_differentiation_info.is_some(),
            self.nrv2x_services_authorized.is_some(),
            self.ltev2x_services_authorized.is_some(),
            self.nrue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.lteue_sidelink_aggregate_maximum_bitrate.is_some(),
            self.pc5_qos_parameters.is_some(),
            self.c_emode_brestricted.is_some(),
            self.ue_up_c_iot_support.is_some(),
            self.ue_radio_capability_id.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (93 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.security_context.to_aper(enc, UNCONSTRAINED)?;
        (77 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_switched_list
            .to_aper(enc, UNCONSTRAINED)?;
        (0 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.allowed_nssai.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ue_security_capabilities {
            (119 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.new_security_context_ind {
            (41 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pdu_session_resource_released_list_ps_ack {
            (68 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.core_network_assistance_information_for_inactive {
            (18 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.rrc_inactive_transition_report_request {
            (91 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.redirection_voice_fallback {
            (146 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.cn_assisted_ran_tuning {
            (165 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.srvcc_operation_possible {
            (177 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.enhanced_coverage_restriction {
            (205 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_connected_time {
            (206 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_differentiation_info {
            (209 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrv2x_services_authorized {
            (216 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ltev2x_services_authorized {
            (215 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nrue_sidelink_aggregate_maximum_bitrate {
            (218 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.lteue_sidelink_aggregate_maximum_bitrate {
            (217 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.pc5_qos_parameters {
            (219 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.c_emode_brestricted {
            (222 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_up_c_iot_support {
            (234 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_id {
            (264 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PathSwitchRequestFailure
#[derive(Clone)]
pub struct PathSwitchRequestFailure {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_released_list_ps_fail: PduSessionResourceReleasedListPsFail,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for PathSwitchRequestFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_released_list_ps_fail: Option<
            PduSessionResourceReleasedListPsFail,
        > = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                69 => {
                    pdu_session_resource_released_list_ps_fail = Some(
                        PduSessionResourceReleasedListPsFail::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_released_list_ps_fail =
            pdu_session_resource_released_list_ps_fail.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_released_list_ps_fail,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (69 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_released_list_ps_fail
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverCancel
#[derive(Clone)]
pub struct HandoverCancel {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub cause: Cause,
}

impl APerElement for HandoverCancel {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut cause: Option<Cause> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            cause,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// HandoverCancelAcknowledge
#[derive(Clone)]
pub struct HandoverCancelAcknowledge {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for HandoverCancelAcknowledge {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// HandoverSuccess
#[derive(Clone)]
pub struct HandoverSuccess {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
}

impl APerElement for HandoverSuccess {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UplinkRanEarlyStatusTransfer
#[derive(Clone)]
pub struct UplinkRanEarlyStatusTransfer {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub early_status_transfer_transparent_container: EarlyStatusTransferTransparentContainer,
}

impl APerElement for UplinkRanEarlyStatusTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut early_status_transfer_transparent_container: Option<
            EarlyStatusTransferTransparentContainer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                268 => {
                    early_status_transfer_transparent_container = Some(
                        EarlyStatusTransferTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let early_status_transfer_transparent_container =
            early_status_transfer_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            early_status_transfer_transparent_container,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (268 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.early_status_transfer_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// DownlinkRanEarlyStatusTransfer
#[derive(Clone)]
pub struct DownlinkRanEarlyStatusTransfer {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub early_status_transfer_transparent_container: EarlyStatusTransferTransparentContainer,
}

impl APerElement for DownlinkRanEarlyStatusTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut early_status_transfer_transparent_container: Option<
            EarlyStatusTransferTransparentContainer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                268 => {
                    early_status_transfer_transparent_container = Some(
                        EarlyStatusTransferTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let early_status_transfer_transparent_container =
            early_status_transfer_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            early_status_transfer_transparent_container,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (268 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.early_status_transfer_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UplinkRanStatusTransfer
#[derive(Clone)]
pub struct UplinkRanStatusTransfer {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ran_status_transfer_transparent_container: RanStatusTransferTransparentContainer,
}

impl APerElement for UplinkRanStatusTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ran_status_transfer_transparent_container: Option<
            RanStatusTransferTransparentContainer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                84 => {
                    ran_status_transfer_transparent_container = Some(
                        RanStatusTransferTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_status_transfer_transparent_container =
            ran_status_transfer_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ran_status_transfer_transparent_container,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (84 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_status_transfer_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// DownlinkRanStatusTransfer
#[derive(Clone)]
pub struct DownlinkRanStatusTransfer {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ran_status_transfer_transparent_container: RanStatusTransferTransparentContainer,
}

impl APerElement for DownlinkRanStatusTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ran_status_transfer_transparent_container: Option<
            RanStatusTransferTransparentContainer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                84 => {
                    ran_status_transfer_transparent_container = Some(
                        RanStatusTransferTransparentContainer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_status_transfer_transparent_container =
            ran_status_transfer_transparent_container.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ran_status_transfer_transparent_container,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (84 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_status_transfer_transparent_container
            .to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// Paging
#[derive(Clone)]
pub struct Paging {
    pub ue_paging_identity: UePagingIdentity,
    pub paging_drx: Option<PagingDrx>,
    pub tai_list_for_paging: TaiListForPaging,
    pub paging_priority: Option<PagingPriority>,
    pub ue_radio_capability_for_paging: Option<UeRadioCapabilityForPaging>,
    pub paging_origin: Option<PagingOrigin>,
    pub assistance_data_for_paging: Option<AssistanceDataForPaging>,
    pub nb_iot_paging_e_drx_info: Option<NbIotPagingEDrxInfo>,
    pub nb_iot_paging_drx: Option<NbIotPagingDrx>,
    pub enhanced_coverage_restriction: Option<EnhancedCoverageRestriction>,
    pub wus_assistance_information: Option<WusAssistanceInformation>,
    pub paginge_drx_information: Option<PagingeDrxInformation>,
    pub c_emode_brestricted: Option<CEmodeBrestricted>,
}

impl APerElement for Paging {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ue_paging_identity: Option<UePagingIdentity> = None;
        let mut paging_drx: Option<PagingDrx> = None;
        let mut tai_list_for_paging: Option<TaiListForPaging> = None;
        let mut paging_priority: Option<PagingPriority> = None;
        let mut ue_radio_capability_for_paging: Option<UeRadioCapabilityForPaging> = None;
        let mut paging_origin: Option<PagingOrigin> = None;
        let mut assistance_data_for_paging: Option<AssistanceDataForPaging> = None;
        let mut nb_iot_paging_e_drx_info: Option<NbIotPagingEDrxInfo> = None;
        let mut nb_iot_paging_drx: Option<NbIotPagingDrx> = None;
        let mut enhanced_coverage_restriction: Option<EnhancedCoverageRestriction> = None;
        let mut wus_assistance_information: Option<WusAssistanceInformation> = None;
        let mut paginge_drx_information: Option<PagingeDrxInformation> = None;
        let mut c_emode_brestricted: Option<CEmodeBrestricted> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                115 => {
                    ue_paging_identity = Some(UePagingIdentity::from_aper(decoder, UNCONSTRAINED)?);
                }
                50 => {
                    paging_drx = Some(PagingDrx::from_aper(decoder, UNCONSTRAINED)?);
                }
                103 => {
                    tai_list_for_paging =
                        Some(TaiListForPaging::from_aper(decoder, UNCONSTRAINED)?);
                }
                52 => {
                    paging_priority = Some(PagingPriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                118 => {
                    ue_radio_capability_for_paging = Some(UeRadioCapabilityForPaging::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                51 => {
                    paging_origin = Some(PagingOrigin::from_aper(decoder, UNCONSTRAINED)?);
                }
                11 => {
                    assistance_data_for_paging =
                        Some(AssistanceDataForPaging::from_aper(decoder, UNCONSTRAINED)?);
                }
                203 => {
                    nb_iot_paging_e_drx_info =
                        Some(NbIotPagingEDrxInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                202 => {
                    nb_iot_paging_drx = Some(NbIotPagingDrx::from_aper(decoder, UNCONSTRAINED)?);
                }
                205 => {
                    enhanced_coverage_restriction = Some(EnhancedCoverageRestriction::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                208 => {
                    wus_assistance_information =
                        Some(WusAssistanceInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                223 => {
                    paginge_drx_information =
                        Some(PagingeDrxInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                222 => {
                    c_emode_brestricted =
                        Some(CEmodeBrestricted::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ue_paging_identity = ue_paging_identity.ok_or(DecodeError::InvalidChoice)?;
        let tai_list_for_paging = tai_list_for_paging.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ue_paging_identity,
            paging_drx,
            tai_list_for_paging,
            paging_priority,
            ue_radio_capability_for_paging,
            paging_origin,
            assistance_data_for_paging,
            nb_iot_paging_e_drx_info,
            nb_iot_paging_drx,
            enhanced_coverage_restriction,
            wus_assistance_information,
            paginge_drx_information,
            c_emode_brestricted,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.paging_drx.is_some(),
            self.paging_priority.is_some(),
            self.ue_radio_capability_for_paging.is_some(),
            self.paging_origin.is_some(),
            self.assistance_data_for_paging.is_some(),
            self.nb_iot_paging_e_drx_info.is_some(),
            self.nb_iot_paging_drx.is_some(),
            self.enhanced_coverage_restriction.is_some(),
            self.wus_assistance_information.is_some(),
            self.paginge_drx_information.is_some(),
            self.c_emode_brestricted.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (115 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ue_paging_identity.to_aper(enc, UNCONSTRAINED)?;
        (103 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.tai_list_for_paging.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.paging_drx {
            (50 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.paging_priority {
            (52 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_for_paging {
            (118 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.paging_origin {
            (51 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.assistance_data_for_paging {
            (11 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nb_iot_paging_e_drx_info {
            (203 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nb_iot_paging_drx {
            (202 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.enhanced_coverage_restriction {
            (205 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.wus_assistance_information {
            (208 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.paginge_drx_information {
            (223 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.c_emode_brestricted {
            (222 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// InitialUeMessage
#[derive(Clone)]
pub struct InitialUeMessage {
    pub ran_ue_ngap_id: RanUeNgapId,
    pub nas_pdu: NasPdu,
    pub user_location_information: UserLocationInformation,
    pub rrc_establishment_cause: RrcEstablishmentCause,
    pub five_g_s_tmsi: Option<FiveGSTmsi>,
    pub amf_set_id: Option<AmfSetId>,
    pub ue_context_request: Option<UeContextRequest>,
    pub allowed_nssai: Option<AllowedNssai>,
    pub source_to_target_amf_information_reroute: Option<SourceToTargetAmfInformationReroute>,
    pub selected_plmn_identity: Option<PlmnIdentity>,
    pub iab_node_indication: Option<IabNodeIndication>,
    pub c_emode_b_support_indicator: Option<CEmodeBSupportIndicator>,
    pub ltem_indication: Option<LtemIndication>,
    pub edt_session: Option<EdtSession>,
    pub authenticated_indication: Option<AuthenticatedIndication>,
    pub npn_access_information: Option<NpnAccessInformation>,
}

impl APerElement for InitialUeMessage {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut nas_pdu: Option<NasPdu> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut rrc_establishment_cause: Option<RrcEstablishmentCause> = None;
        let mut five_g_s_tmsi: Option<FiveGSTmsi> = None;
        let mut amf_set_id: Option<AmfSetId> = None;
        let mut ue_context_request: Option<UeContextRequest> = None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut source_to_target_amf_information_reroute: Option<
            SourceToTargetAmfInformationReroute,
        > = None;
        let mut selected_plmn_identity: Option<PlmnIdentity> = None;
        let mut iab_node_indication: Option<IabNodeIndication> = None;
        let mut c_emode_b_support_indicator: Option<CEmodeBSupportIndicator> = None;
        let mut ltem_indication: Option<LtemIndication> = None;
        let mut edt_session: Option<EdtSession> = None;
        let mut authenticated_indication: Option<AuthenticatedIndication> = None;
        let mut npn_access_information: Option<NpnAccessInformation> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                38 => {
                    nas_pdu = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                90 => {
                    rrc_establishment_cause =
                        Some(RrcEstablishmentCause::from_aper(decoder, UNCONSTRAINED)?);
                }
                26 => {
                    five_g_s_tmsi = Some(FiveGSTmsi::from_aper(decoder, UNCONSTRAINED)?);
                }
                3 => {
                    amf_set_id = Some(AmfSetId::from_aper(decoder, UNCONSTRAINED)?);
                }
                112 => {
                    ue_context_request = Some(UeContextRequest::from_aper(decoder, UNCONSTRAINED)?);
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                171 => {
                    source_to_target_amf_information_reroute = Some(
                        SourceToTargetAmfInformationReroute::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                174 => {
                    selected_plmn_identity = Some(PlmnIdentity::from_aper(decoder, UNCONSTRAINED)?);
                }
                201 => {
                    iab_node_indication =
                        Some(IabNodeIndication::from_aper(decoder, UNCONSTRAINED)?);
                }
                224 => {
                    c_emode_b_support_indicator =
                        Some(CEmodeBSupportIndicator::from_aper(decoder, UNCONSTRAINED)?);
                }
                225 => {
                    ltem_indication = Some(LtemIndication::from_aper(decoder, UNCONSTRAINED)?);
                }
                227 => {
                    edt_session = Some(EdtSession::from_aper(decoder, UNCONSTRAINED)?);
                }
                245 => {
                    authenticated_indication =
                        Some(AuthenticatedIndication::from_aper(decoder, UNCONSTRAINED)?);
                }
                259 => {
                    npn_access_information =
                        Some(NpnAccessInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let nas_pdu = nas_pdu.ok_or(DecodeError::InvalidChoice)?;
        let user_location_information =
            user_location_information.ok_or(DecodeError::InvalidChoice)?;
        let rrc_establishment_cause = rrc_establishment_cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ran_ue_ngap_id,
            nas_pdu,
            user_location_information,
            rrc_establishment_cause,
            five_g_s_tmsi,
            amf_set_id,
            ue_context_request,
            allowed_nssai,
            source_to_target_amf_information_reroute,
            selected_plmn_identity,
            iab_node_indication,
            c_emode_b_support_indicator,
            ltem_indication,
            edt_session,
            authenticated_indication,
            npn_access_information,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.five_g_s_tmsi.is_some(),
            self.amf_set_id.is_some(),
            self.ue_context_request.is_some(),
            self.allowed_nssai.is_some(),
            self.source_to_target_amf_information_reroute.is_some(),
            self.selected_plmn_identity.is_some(),
            self.iab_node_indication.is_some(),
            self.c_emode_b_support_indicator.is_some(),
            self.ltem_indication.is_some(),
            self.edt_session.is_some(),
            self.authenticated_indication.is_some(),
            self.npn_access_information.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (38 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.nas_pdu.to_aper(enc, UNCONSTRAINED)?;
        (121 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.user_location_information.to_aper(enc, UNCONSTRAINED)?;
        (90 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.rrc_establishment_cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.five_g_s_tmsi {
            (26 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.amf_set_id {
            (3 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_context_request {
            (112 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.allowed_nssai {
            (0 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.source_to_target_amf_information_reroute {
            (171 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.selected_plmn_identity {
            (174 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.iab_node_indication {
            (201 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.c_emode_b_support_indicator {
            (224 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ltem_indication {
            (225 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.edt_session {
            (227 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.authenticated_indication {
            (245 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.npn_access_information {
            (259 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// DownlinkNasTransport
#[derive(Clone)]
pub struct DownlinkNasTransport {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub old_amf: Option<AmfName>,
    pub ran_paging_priority: Option<RanPagingPriority>,
    pub nas_pdu: NasPdu,
    pub mobility_restriction_list: Option<MobilityRestrictionList>,
    pub index_to_rfsp: Option<IndexToRfsp>,
    pub ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate>,
    pub allowed_nssai: Option<AllowedNssai>,
    pub srvcc_operation_possible: Option<SrvccOperationPossible>,
    pub enhanced_coverage_restriction: Option<EnhancedCoverageRestriction>,
    pub extended_connected_time: Option<ExtendedConnectedTime>,
    pub ue_differentiation_info: Option<UeDifferentiationInfo>,
    pub c_emode_brestricted: Option<CEmodeBrestricted>,
    pub ue_radio_capability: Option<UeRadioCapability>,
    pub ue_capability_info_request: Option<UeCapabilityInfoRequest>,
    pub end_indication: Option<EndIndication>,
    pub ue_radio_capability_id: Option<UeRadioCapabilityId>,
}

impl APerElement for DownlinkNasTransport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut old_amf: Option<AmfName> = None;
        let mut ran_paging_priority: Option<RanPagingPriority> = None;
        let mut nas_pdu: Option<NasPdu> = None;
        let mut mobility_restriction_list: Option<MobilityRestrictionList> = None;
        let mut index_to_rfsp: Option<IndexToRfsp> = None;
        let mut ue_aggregate_maximum_bit_rate: Option<UeAggregateMaximumBitRate> = None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut srvcc_operation_possible: Option<SrvccOperationPossible> = None;
        let mut enhanced_coverage_restriction: Option<EnhancedCoverageRestriction> = None;
        let mut extended_connected_time: Option<ExtendedConnectedTime> = None;
        let mut ue_differentiation_info: Option<UeDifferentiationInfo> = None;
        let mut c_emode_brestricted: Option<CEmodeBrestricted> = None;
        let mut ue_radio_capability: Option<UeRadioCapability> = None;
        let mut ue_capability_info_request: Option<UeCapabilityInfoRequest> = None;
        let mut end_indication: Option<EndIndication> = None;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                48 => {
                    old_amf = Some(AmfName::from_aper(decoder, UNCONSTRAINED)?);
                }
                83 => {
                    ran_paging_priority =
                        Some(RanPagingPriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                38 => {
                    nas_pdu = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                36 => {
                    mobility_restriction_list =
                        Some(MobilityRestrictionList::from_aper(decoder, UNCONSTRAINED)?);
                }
                31 => {
                    index_to_rfsp = Some(IndexToRfsp::from_aper(decoder, UNCONSTRAINED)?);
                }
                110 => {
                    ue_aggregate_maximum_bit_rate = Some(UeAggregateMaximumBitRate::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                177 => {
                    srvcc_operation_possible =
                        Some(SrvccOperationPossible::from_aper(decoder, UNCONSTRAINED)?);
                }
                205 => {
                    enhanced_coverage_restriction = Some(EnhancedCoverageRestriction::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                206 => {
                    extended_connected_time =
                        Some(ExtendedConnectedTime::from_aper(decoder, UNCONSTRAINED)?);
                }
                209 => {
                    ue_differentiation_info =
                        Some(UeDifferentiationInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                222 => {
                    c_emode_brestricted =
                        Some(CEmodeBrestricted::from_aper(decoder, UNCONSTRAINED)?);
                }
                117 => {
                    ue_radio_capability =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                228 => {
                    ue_capability_info_request =
                        Some(UeCapabilityInfoRequest::from_aper(decoder, UNCONSTRAINED)?);
                }
                226 => {
                    end_indication = Some(EndIndication::from_aper(decoder, UNCONSTRAINED)?);
                }
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let nas_pdu = nas_pdu.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            old_amf,
            ran_paging_priority,
            nas_pdu,
            mobility_restriction_list,
            index_to_rfsp,
            ue_aggregate_maximum_bit_rate,
            allowed_nssai,
            srvcc_operation_possible,
            enhanced_coverage_restriction,
            extended_connected_time,
            ue_differentiation_info,
            c_emode_brestricted,
            ue_radio_capability,
            ue_capability_info_request,
            end_indication,
            ue_radio_capability_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.old_amf.is_some(),
            self.ran_paging_priority.is_some(),
            self.mobility_restriction_list.is_some(),
            self.index_to_rfsp.is_some(),
            self.ue_aggregate_maximum_bit_rate.is_some(),
            self.allowed_nssai.is_some(),
            self.srvcc_operation_possible.is_some(),
            self.enhanced_coverage_restriction.is_some(),
            self.extended_connected_time.is_some(),
            self.ue_differentiation_info.is_some(),
            self.c_emode_brestricted.is_some(),
            self.ue_radio_capability.is_some(),
            self.ue_capability_info_request.is_some(),
            self.end_indication.is_some(),
            self.ue_radio_capability_id.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (38 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.nas_pdu.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.old_amf {
            (48 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ran_paging_priority {
            (83 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.mobility_restriction_list {
            (36 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.index_to_rfsp {
            (31 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_aggregate_maximum_bit_rate {
            (110 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.allowed_nssai {
            (0 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.srvcc_operation_possible {
            (177 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.enhanced_coverage_restriction {
            (205 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_connected_time {
            (206 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_differentiation_info {
            (209 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.c_emode_brestricted {
            (222 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability {
            (117 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_capability_info_request {
            (228 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.end_indication {
            (226 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_id {
            (264 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UplinkNasTransport
#[derive(Clone)]
pub struct UplinkNasTransport {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub nas_pdu: NasPdu,
    pub user_location_information: UserLocationInformation,
    pub w_agf_identity_information: Option<Vec<u8>>,
    pub tngf_identity_information: Option<Vec<u8>>,
    pub twif_identity_information: Option<Vec<u8>>,
}

impl APerElement for UplinkNasTransport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut nas_pdu: Option<NasPdu> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut w_agf_identity_information: Option<Vec<u8>> = None;
        let mut tngf_identity_information: Option<Vec<u8>> = None;
        let mut twif_identity_information: Option<Vec<u8>> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                38 => {
                    nas_pdu = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                239 => {
                    w_agf_identity_information =
                        Some(Vec::<u8>::from_aper(decoder, UNCONSTRAINED)?);
                }
                246 => {
                    tngf_identity_information = Some(Vec::<u8>::from_aper(decoder, UNCONSTRAINED)?);
                }
                247 => {
                    twif_identity_information = Some(Vec::<u8>::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let nas_pdu = nas_pdu.ok_or(DecodeError::InvalidChoice)?;
        let user_location_information =
            user_location_information.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            nas_pdu,
            user_location_information,
            w_agf_identity_information,
            tngf_identity_information,
            twif_identity_information,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.w_agf_identity_information.is_some(),
            self.tngf_identity_information.is_some(),
            self.twif_identity_information.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (38 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.nas_pdu.to_aper(enc, UNCONSTRAINED)?;
        (121 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.user_location_information.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.w_agf_identity_information {
            (239 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.tngf_identity_information {
            (246 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.twif_identity_information {
            (247 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// NasNonDeliveryIndication
#[derive(Clone)]
pub struct NasNonDeliveryIndication {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub nas_pdu: NasPdu,
    pub cause: Cause,
}

impl APerElement for NasNonDeliveryIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut nas_pdu: Option<NasPdu> = None;
        let mut cause: Option<Cause> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                38 => {
                    nas_pdu = Some(NasPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let nas_pdu = nas_pdu.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            nas_pdu,
            cause,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (38 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.nas_pdu.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// RerouteNasRequest
#[derive(Clone)]
pub struct RerouteNasRequest {
    pub ran_ue_ngap_id: RanUeNgapId,
    pub amf_ue_ngap_id: Option<AmfUeNgapId>,
    pub ngap_message: Vec<u8>,
    pub amf_set_id: AmfSetId,
    pub allowed_nssai: Option<AllowedNssai>,
    pub source_to_target_amf_information_reroute: Option<SourceToTargetAmfInformationReroute>,
}

impl APerElement for RerouteNasRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ngap_message: Option<Vec<u8>> = None;
        let mut amf_set_id: Option<AmfSetId> = None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut source_to_target_amf_information_reroute: Option<
            SourceToTargetAmfInformationReroute,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                42 => {
                    ngap_message = Some(Vec::<u8>::from_aper(decoder, UNCONSTRAINED)?);
                }
                3 => {
                    amf_set_id = Some(AmfSetId::from_aper(decoder, UNCONSTRAINED)?);
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                171 => {
                    source_to_target_amf_information_reroute = Some(
                        SourceToTargetAmfInformationReroute::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ngap_message = ngap_message.ok_or(DecodeError::InvalidChoice)?;
        let amf_set_id = amf_set_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ran_ue_ngap_id,
            amf_ue_ngap_id,
            ngap_message,
            amf_set_id,
            allowed_nssai,
            source_to_target_amf_information_reroute,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.amf_ue_ngap_id.is_some(),
            self.allowed_nssai.is_some(),
            self.source_to_target_amf_information_reroute.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (42 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ngap_message.to_aper(enc, UNCONSTRAINED)?;
        (3 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_set_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.amf_ue_ngap_id {
            (10 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.allowed_nssai {
            (0 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.source_to_target_amf_information_reroute {
            (171 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// NgSetupRequest
#[derive(Clone)]
pub struct NgSetupRequest {
    pub global_ran_node_id: GlobalRanNodeId,
    pub ran_node_name: Option<RanNodeName>,
    pub supported_ta_list: SupportedTaList,
    pub default_paging_drx: PagingDrx,
    pub ue_retention_information: Option<UeRetentionInformation>,
    pub nb_iot_default_paging_drx: Option<NbIotDefaultPagingDrx>,
    pub extended_ran_node_name: Option<ExtendedRanNodeName>,
}

impl APerElement for NgSetupRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut global_ran_node_id: Option<GlobalRanNodeId> = None;
        let mut ran_node_name: Option<RanNodeName> = None;
        let mut supported_ta_list: Option<SupportedTaList> = None;
        let mut default_paging_drx: Option<PagingDrx> = None;
        let mut ue_retention_information: Option<UeRetentionInformation> = None;
        let mut nb_iot_default_paging_drx: Option<NbIotDefaultPagingDrx> = None;
        let mut extended_ran_node_name: Option<ExtendedRanNodeName> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                27 => {
                    global_ran_node_id = Some(GlobalRanNodeId::from_aper(decoder, UNCONSTRAINED)?);
                }
                82 => {
                    ran_node_name = Some(RanNodeName::from_aper(decoder, UNCONSTRAINED)?);
                }
                102 => {
                    supported_ta_list = Some(SupportedTaList::from_aper(decoder, UNCONSTRAINED)?);
                }
                21 => {
                    default_paging_drx = Some(PagingDrx::from_aper(decoder, UNCONSTRAINED)?);
                }
                147 => {
                    ue_retention_information =
                        Some(UeRetentionInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                204 => {
                    nb_iot_default_paging_drx =
                        Some(NbIotDefaultPagingDrx::from_aper(decoder, UNCONSTRAINED)?);
                }
                273 => {
                    extended_ran_node_name =
                        Some(ExtendedRanNodeName::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let global_ran_node_id = global_ran_node_id.ok_or(DecodeError::InvalidChoice)?;
        let supported_ta_list = supported_ta_list.ok_or(DecodeError::InvalidChoice)?;
        let default_paging_drx = default_paging_drx.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            global_ran_node_id,
            ran_node_name,
            supported_ta_list,
            default_paging_drx,
            ue_retention_information,
            nb_iot_default_paging_drx,
            extended_ran_node_name,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ran_node_name.is_some(),
            self.ue_retention_information.is_some(),
            self.nb_iot_default_paging_drx.is_some(),
            self.extended_ran_node_name.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count()
            + 3;

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.align();
        enc.append(&encode_int(num_ies as i64, Some(0), Some(65535))?)?;
        (27 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        enc.append_open(&self.global_ran_node_id)?;
        //self.global_ran_node_id.to_aper(enc, UNCONSTRAINED)?;
        (102 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        enc.append_open(&self.supported_ta_list)?;
        //self.supported_ta_list.to_aper(enc, UNCONSTRAINED)?;
        (21 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        enc.append_open(&self.default_paging_drx)?;
        //self.default_paging_drx.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ran_node_name {
            (82 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            enc.append_open(x)?;
            //x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_retention_information {
            (147 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            enc.append_open(x)?;
            //x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nb_iot_default_paging_drx {
            (204 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            enc.append_open(x)?;
            //x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_ran_node_name {
            (273 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            enc.append_open(x)?;
            //x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// NgSetupResponse
#[derive(Clone)]
pub struct NgSetupResponse {
    pub amf_name: AmfName,
    pub served_guami_list: ServedGuamiList,
    pub relative_amf_capacity: RelativeAmfCapacity,
    pub plmn_support_list: PlmnSupportList,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
    pub ue_retention_information: Option<UeRetentionInformation>,
    pub iab_supported: Option<IabSupported>,
    pub extended_amf_name: Option<ExtendedAmfName>,
}

impl APerElement for NgSetupResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_name: Option<AmfName> = None;
        let mut served_guami_list: Option<ServedGuamiList> = None;
        let mut relative_amf_capacity: Option<RelativeAmfCapacity> = None;
        let mut plmn_support_list: Option<PlmnSupportList> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;
        let mut ue_retention_information: Option<UeRetentionInformation> = None;
        let mut iab_supported: Option<IabSupported> = None;
        let mut extended_amf_name: Option<ExtendedAmfName> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                1 => {
                    amf_name = Some(AmfName::from_aper(decoder, UNCONSTRAINED)?);
                }
                96 => {
                    served_guami_list = Some(ServedGuamiList::from_aper(decoder, UNCONSTRAINED)?);
                }
                86 => {
                    relative_amf_capacity =
                        Some(RelativeAmfCapacity::from_aper(decoder, UNCONSTRAINED)?);
                }
                80 => {
                    plmn_support_list = Some(PlmnSupportList::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                147 => {
                    ue_retention_information =
                        Some(UeRetentionInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                200 => {
                    iab_supported = Some(IabSupported::from_aper(decoder, UNCONSTRAINED)?);
                }
                274 => {
                    extended_amf_name = Some(ExtendedAmfName::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_name = amf_name.ok_or(DecodeError::InvalidChoice)?;
        let served_guami_list = served_guami_list.ok_or(DecodeError::InvalidChoice)?;
        let relative_amf_capacity = relative_amf_capacity.ok_or(DecodeError::InvalidChoice)?;
        let plmn_support_list = plmn_support_list.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_name,
            served_guami_list,
            relative_amf_capacity,
            plmn_support_list,
            criticality_diagnostics,
            ue_retention_information,
            iab_supported,
            extended_amf_name,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.criticality_diagnostics.is_some(),
            self.ue_retention_information.is_some(),
            self.iab_supported.is_some(),
            self.extended_amf_name.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (1 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_name.to_aper(enc, UNCONSTRAINED)?;
        (96 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.served_guami_list.to_aper(enc, UNCONSTRAINED)?;
        (86 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.relative_amf_capacity.to_aper(enc, UNCONSTRAINED)?;
        (80 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.plmn_support_list.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_retention_information {
            (147 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.iab_supported {
            (200 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_amf_name {
            (274 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// NgSetupFailure
#[derive(Clone)]
pub struct NgSetupFailure {
    pub cause: Cause,
    pub time_to_wait: Option<TimeToWait>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for NgSetupFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut cause: Option<Cause> = None;
        let mut time_to_wait: Option<TimeToWait> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                107 => {
                    time_to_wait = Some(TimeToWait::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            cause,
            time_to_wait,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.time_to_wait.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.time_to_wait {
            (107 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// RanConfigurationUpdate
#[derive(Clone)]
pub struct RanConfigurationUpdate {
    pub ran_node_name: Option<RanNodeName>,
    pub supported_ta_list: Option<SupportedTaList>,
    pub default_paging_drx: Option<PagingDrx>,
    pub global_ran_node_id: Option<GlobalRanNodeId>,
    pub ngran_tnl_association_to_remove_list: Option<NgranTnlAssociationToRemoveList>,
    pub nb_iot_default_paging_drx: Option<NbIotDefaultPagingDrx>,
    pub extended_ran_node_name: Option<ExtendedRanNodeName>,
}

impl APerElement for RanConfigurationUpdate {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ran_node_name: Option<RanNodeName> = None;
        let mut supported_ta_list: Option<SupportedTaList> = None;
        let mut default_paging_drx: Option<PagingDrx> = None;
        let mut global_ran_node_id: Option<GlobalRanNodeId> = None;
        let mut ngran_tnl_association_to_remove_list: Option<NgranTnlAssociationToRemoveList> =
            None;
        let mut nb_iot_default_paging_drx: Option<NbIotDefaultPagingDrx> = None;
        let mut extended_ran_node_name: Option<ExtendedRanNodeName> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                82 => {
                    ran_node_name = Some(RanNodeName::from_aper(decoder, UNCONSTRAINED)?);
                }
                102 => {
                    supported_ta_list = Some(SupportedTaList::from_aper(decoder, UNCONSTRAINED)?);
                }
                21 => {
                    default_paging_drx = Some(PagingDrx::from_aper(decoder, UNCONSTRAINED)?);
                }
                27 => {
                    global_ran_node_id = Some(GlobalRanNodeId::from_aper(decoder, UNCONSTRAINED)?);
                }
                167 => {
                    ngran_tnl_association_to_remove_list = Some(
                        NgranTnlAssociationToRemoveList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                204 => {
                    nb_iot_default_paging_drx =
                        Some(NbIotDefaultPagingDrx::from_aper(decoder, UNCONSTRAINED)?);
                }
                273 => {
                    extended_ran_node_name =
                        Some(ExtendedRanNodeName::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            ran_node_name,
            supported_ta_list,
            default_paging_drx,
            global_ran_node_id,
            ngran_tnl_association_to_remove_list,
            nb_iot_default_paging_drx,
            extended_ran_node_name,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ran_node_name.is_some(),
            self.supported_ta_list.is_some(),
            self.default_paging_drx.is_some(),
            self.global_ran_node_id.is_some(),
            self.ngran_tnl_association_to_remove_list.is_some(),
            self.nb_iot_default_paging_drx.is_some(),
            self.extended_ran_node_name.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.ran_node_name {
            (82 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.supported_ta_list {
            (102 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.default_paging_drx {
            (21 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.global_ran_node_id {
            (27 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ngran_tnl_association_to_remove_list {
            (167 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nb_iot_default_paging_drx {
            (204 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_ran_node_name {
            (273 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// RanConfigurationUpdateAcknowledge
#[derive(Clone)]
pub struct RanConfigurationUpdateAcknowledge {
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for RanConfigurationUpdateAcknowledge {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// RanConfigurationUpdateFailure
#[derive(Clone)]
pub struct RanConfigurationUpdateFailure {
    pub cause: Cause,
    pub time_to_wait: Option<TimeToWait>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for RanConfigurationUpdateFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut cause: Option<Cause> = None;
        let mut time_to_wait: Option<TimeToWait> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                107 => {
                    time_to_wait = Some(TimeToWait::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            cause,
            time_to_wait,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.time_to_wait.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.time_to_wait {
            (107 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// AmfConfigurationUpdate
#[derive(Clone)]
pub struct AmfConfigurationUpdate {
    pub amf_name: Option<AmfName>,
    pub served_guami_list: Option<ServedGuamiList>,
    pub relative_amf_capacity: Option<RelativeAmfCapacity>,
    pub plmn_support_list: Option<PlmnSupportList>,
    pub amf_tnl_association_to_add_list: Option<AmfTnlAssociationToAddList>,
    pub amf_tnl_association_to_remove_list: Option<AmfTnlAssociationToRemoveList>,
    pub amf_tnl_association_to_update_list: Option<AmfTnlAssociationToUpdateList>,
    pub extended_amf_name: Option<ExtendedAmfName>,
}

impl APerElement for AmfConfigurationUpdate {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_name: Option<AmfName> = None;
        let mut served_guami_list: Option<ServedGuamiList> = None;
        let mut relative_amf_capacity: Option<RelativeAmfCapacity> = None;
        let mut plmn_support_list: Option<PlmnSupportList> = None;
        let mut amf_tnl_association_to_add_list: Option<AmfTnlAssociationToAddList> = None;
        let mut amf_tnl_association_to_remove_list: Option<AmfTnlAssociationToRemoveList> = None;
        let mut amf_tnl_association_to_update_list: Option<AmfTnlAssociationToUpdateList> = None;
        let mut extended_amf_name: Option<ExtendedAmfName> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                1 => {
                    amf_name = Some(AmfName::from_aper(decoder, UNCONSTRAINED)?);
                }
                96 => {
                    served_guami_list = Some(ServedGuamiList::from_aper(decoder, UNCONSTRAINED)?);
                }
                86 => {
                    relative_amf_capacity =
                        Some(RelativeAmfCapacity::from_aper(decoder, UNCONSTRAINED)?);
                }
                80 => {
                    plmn_support_list = Some(PlmnSupportList::from_aper(decoder, UNCONSTRAINED)?);
                }
                6 => {
                    amf_tnl_association_to_add_list = Some(AmfTnlAssociationToAddList::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                7 => {
                    amf_tnl_association_to_remove_list = Some(
                        AmfTnlAssociationToRemoveList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                8 => {
                    amf_tnl_association_to_update_list = Some(
                        AmfTnlAssociationToUpdateList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                274 => {
                    extended_amf_name = Some(ExtendedAmfName::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            amf_name,
            served_guami_list,
            relative_amf_capacity,
            plmn_support_list,
            amf_tnl_association_to_add_list,
            amf_tnl_association_to_remove_list,
            amf_tnl_association_to_update_list,
            extended_amf_name,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.amf_name.is_some(),
            self.served_guami_list.is_some(),
            self.relative_amf_capacity.is_some(),
            self.plmn_support_list.is_some(),
            self.amf_tnl_association_to_add_list.is_some(),
            self.amf_tnl_association_to_remove_list.is_some(),
            self.amf_tnl_association_to_update_list.is_some(),
            self.extended_amf_name.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.amf_name {
            (1 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.served_guami_list {
            (96 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.relative_amf_capacity {
            (86 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.plmn_support_list {
            (80 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.amf_tnl_association_to_add_list {
            (6 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.amf_tnl_association_to_remove_list {
            (7 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.amf_tnl_association_to_update_list {
            (8 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.extended_amf_name {
            (274 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// AmfConfigurationUpdateAcknowledge
#[derive(Clone)]
pub struct AmfConfigurationUpdateAcknowledge {
    pub amf_tnl_association_setup_list: Option<AmfTnlAssociationSetupList>,
    pub amf_tnl_association_failed_to_setup_list: Option<TnlAssociationList>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for AmfConfigurationUpdateAcknowledge {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_tnl_association_setup_list: Option<AmfTnlAssociationSetupList> = None;
        let mut amf_tnl_association_failed_to_setup_list: Option<TnlAssociationList> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                5 => {
                    amf_tnl_association_setup_list = Some(AmfTnlAssociationSetupList::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                4 => {
                    amf_tnl_association_failed_to_setup_list =
                        Some(TnlAssociationList::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            amf_tnl_association_setup_list,
            amf_tnl_association_failed_to_setup_list,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.amf_tnl_association_setup_list.is_some(),
            self.amf_tnl_association_failed_to_setup_list.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.amf_tnl_association_setup_list {
            (5 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.amf_tnl_association_failed_to_setup_list {
            (4 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// AmfConfigurationUpdateFailure
#[derive(Clone)]
pub struct AmfConfigurationUpdateFailure {
    pub cause: Cause,
    pub time_to_wait: Option<TimeToWait>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for AmfConfigurationUpdateFailure {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut cause: Option<Cause> = None;
        let mut time_to_wait: Option<TimeToWait> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                107 => {
                    time_to_wait = Some(TimeToWait::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            cause,
            time_to_wait,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.time_to_wait.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.time_to_wait {
            (107 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// AmfStatusIndication
#[derive(Clone)]
pub struct AmfStatusIndication {
    pub unavailable_guami_list: UnavailableGuamiList,
}

impl APerElement for AmfStatusIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut unavailable_guami_list: Option<UnavailableGuamiList> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                120 => {
                    unavailable_guami_list =
                        Some(UnavailableGuamiList::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let unavailable_guami_list = unavailable_guami_list.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            unavailable_guami_list,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (120 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.unavailable_guami_list.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// NgReset
#[derive(Clone)]
pub struct NgReset {
    pub cause: Cause,
    pub reset_type: ResetType,
}

impl APerElement for NgReset {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut cause: Option<Cause> = None;
        let mut reset_type: Option<ResetType> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                88 => {
                    reset_type = Some(ResetType::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        let reset_type = reset_type.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self { cause, reset_type })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;
        (88 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.reset_type.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// NgResetAcknowledge
#[derive(Clone)]
pub struct NgResetAcknowledge {
    pub ue_associated_logical_ng_connection_list: Option<UeAssociatedLogicalNgConnectionList>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for NgResetAcknowledge {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ue_associated_logical_ng_connection_list: Option<
            UeAssociatedLogicalNgConnectionList,
        > = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                111 => {
                    ue_associated_logical_ng_connection_list = Some(
                        UeAssociatedLogicalNgConnectionList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            ue_associated_logical_ng_connection_list,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ue_associated_logical_ng_connection_list.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.ue_associated_logical_ng_connection_list {
            (111 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// ErrorIndication
#[derive(Clone)]
pub struct ErrorIndication {
    pub amf_ue_ngap_id: Option<AmfUeNgapId>,
    pub ran_ue_ngap_id: Option<RanUeNgapId>,
    pub cause: Option<Cause>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
    pub five_g_s_tmsi: Option<FiveGSTmsi>,
}

impl APerElement for ErrorIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut cause: Option<Cause> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;
        let mut five_g_s_tmsi: Option<FiveGSTmsi> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                26 => {
                    five_g_s_tmsi = Some(FiveGSTmsi::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            cause,
            criticality_diagnostics,
            five_g_s_tmsi,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.amf_ue_ngap_id.is_some(),
            self.ran_ue_ngap_id.is_some(),
            self.cause.is_some(),
            self.criticality_diagnostics.is_some(),
            self.five_g_s_tmsi.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.amf_ue_ngap_id {
            (10 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ran_ue_ngap_id {
            (85 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.cause {
            (15 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.five_g_s_tmsi {
            (26 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// OverloadStart
#[derive(Clone)]
pub struct OverloadStart {
    pub amf_overload_response: Option<OverloadResponse>,
    pub amf_traffic_load_reduction_indication: Option<TrafficLoadReductionIndication>,
    pub overload_start_nssai_list: Option<OverloadStartNssaiList>,
}

impl APerElement for OverloadStart {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_overload_response: Option<OverloadResponse> = None;
        let mut amf_traffic_load_reduction_indication: Option<TrafficLoadReductionIndication> =
            None;
        let mut overload_start_nssai_list: Option<OverloadStartNssaiList> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                2 => {
                    amf_overload_response =
                        Some(OverloadResponse::from_aper(decoder, UNCONSTRAINED)?);
                }
                9 => {
                    amf_traffic_load_reduction_indication = Some(
                        TrafficLoadReductionIndication::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                49 => {
                    overload_start_nssai_list =
                        Some(OverloadStartNssaiList::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            amf_overload_response,
            amf_traffic_load_reduction_indication,
            overload_start_nssai_list,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.amf_overload_response.is_some(),
            self.amf_traffic_load_reduction_indication.is_some(),
            self.overload_start_nssai_list.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.amf_overload_response {
            (2 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.amf_traffic_load_reduction_indication {
            (9 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.overload_start_nssai_list {
            (49 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// OverloadStop
#[derive(Clone)]
pub struct OverloadStop {}

impl APerElement for OverloadStop {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {})
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;

        Ok(())
    }
}

// UplinkRanConfigurationTransfer
#[derive(Clone)]
pub struct UplinkRanConfigurationTransfer {
    pub son_configuration_transfer_ul: Option<SonConfigurationTransfer>,
    pub endc_son_configuration_transfer_ul: Option<EnDcsonConfigurationTransfer>,
    pub intersystem_son_configuration_transfer_ul: Option<IntersystemSonConfigurationTransfer>,
}

impl APerElement for UplinkRanConfigurationTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut son_configuration_transfer_ul: Option<SonConfigurationTransfer> = None;
        let mut endc_son_configuration_transfer_ul: Option<EnDcsonConfigurationTransfer> = None;
        let mut intersystem_son_configuration_transfer_ul: Option<
            IntersystemSonConfigurationTransfer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                99 => {
                    son_configuration_transfer_ul =
                        Some(SonConfigurationTransfer::from_aper(decoder, UNCONSTRAINED)?);
                }
                158 => {
                    endc_son_configuration_transfer_ul = Some(
                        EnDcsonConfigurationTransfer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                251 => {
                    intersystem_son_configuration_transfer_ul = Some(
                        IntersystemSonConfigurationTransfer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            son_configuration_transfer_ul,
            endc_son_configuration_transfer_ul,
            intersystem_son_configuration_transfer_ul,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.son_configuration_transfer_ul.is_some(),
            self.endc_son_configuration_transfer_ul.is_some(),
            self.intersystem_son_configuration_transfer_ul.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.son_configuration_transfer_ul {
            (99 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.endc_son_configuration_transfer_ul {
            (158 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.intersystem_son_configuration_transfer_ul {
            (251 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// DownlinkRanConfigurationTransfer
#[derive(Clone)]
pub struct DownlinkRanConfigurationTransfer {
    pub son_configuration_transfer_dl: Option<SonConfigurationTransfer>,
    pub endc_son_configuration_transfer_dl: Option<EnDcsonConfigurationTransfer>,
    pub intersystem_son_configuration_transfer_dl: Option<IntersystemSonConfigurationTransfer>,
}

impl APerElement for DownlinkRanConfigurationTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut son_configuration_transfer_dl: Option<SonConfigurationTransfer> = None;
        let mut endc_son_configuration_transfer_dl: Option<EnDcsonConfigurationTransfer> = None;
        let mut intersystem_son_configuration_transfer_dl: Option<
            IntersystemSonConfigurationTransfer,
        > = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                98 => {
                    son_configuration_transfer_dl =
                        Some(SonConfigurationTransfer::from_aper(decoder, UNCONSTRAINED)?);
                }
                157 => {
                    endc_son_configuration_transfer_dl = Some(
                        EnDcsonConfigurationTransfer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                250 => {
                    intersystem_son_configuration_transfer_dl = Some(
                        IntersystemSonConfigurationTransfer::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            son_configuration_transfer_dl,
            endc_son_configuration_transfer_dl,
            intersystem_son_configuration_transfer_dl,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.son_configuration_transfer_dl.is_some(),
            self.endc_son_configuration_transfer_dl.is_some(),
            self.intersystem_son_configuration_transfer_dl.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.son_configuration_transfer_dl {
            (98 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.endc_son_configuration_transfer_dl {
            (157 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.intersystem_son_configuration_transfer_dl {
            (250 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// WriteReplaceWarningRequest
#[derive(Clone)]
pub struct WriteReplaceWarningRequest {
    pub message_identifier: MessageIdentifier,
    pub serial_number: SerialNumber,
    pub warning_area_list: Option<WarningAreaList>,
    pub repetition_period: RepetitionPeriod,
    pub number_of_broadcasts_requested: NumberOfBroadcastsRequested,
    pub warning_type: Option<WarningType>,
    pub warning_security_info: Option<WarningSecurityInfo>,
    pub data_coding_scheme: Option<DataCodingScheme>,
    pub warning_message_contents: Option<WarningMessageContents>,
    pub concurrent_warning_message_ind: Option<ConcurrentWarningMessageInd>,
    pub warning_area_coordinates: Option<WarningAreaCoordinates>,
}

impl APerElement for WriteReplaceWarningRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut message_identifier: Option<MessageIdentifier> = None;
        let mut serial_number: Option<SerialNumber> = None;
        let mut warning_area_list: Option<WarningAreaList> = None;
        let mut repetition_period: Option<RepetitionPeriod> = None;
        let mut number_of_broadcasts_requested: Option<NumberOfBroadcastsRequested> = None;
        let mut warning_type: Option<WarningType> = None;
        let mut warning_security_info: Option<WarningSecurityInfo> = None;
        let mut data_coding_scheme: Option<DataCodingScheme> = None;
        let mut warning_message_contents: Option<WarningMessageContents> = None;
        let mut concurrent_warning_message_ind: Option<ConcurrentWarningMessageInd> = None;
        let mut warning_area_coordinates: Option<WarningAreaCoordinates> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                35 => {
                    message_identifier =
                        Some(MessageIdentifier::from_aper(decoder, UNCONSTRAINED)?);
                }
                95 => {
                    serial_number = Some(SerialNumber::from_aper(decoder, UNCONSTRAINED)?);
                }
                122 => {
                    warning_area_list = Some(WarningAreaList::from_aper(decoder, UNCONSTRAINED)?);
                }
                87 => {
                    repetition_period = Some(RepetitionPeriod::from_aper(decoder, UNCONSTRAINED)?);
                }
                47 => {
                    number_of_broadcasts_requested = Some(NumberOfBroadcastsRequested::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                125 => {
                    warning_type = Some(WarningType::from_aper(decoder, UNCONSTRAINED)?);
                }
                124 => {
                    warning_security_info =
                        Some(WarningSecurityInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                20 => {
                    data_coding_scheme = Some(DataCodingScheme::from_aper(decoder, UNCONSTRAINED)?);
                }
                123 => {
                    warning_message_contents =
                        Some(WarningMessageContents::from_aper(decoder, UNCONSTRAINED)?);
                }
                17 => {
                    concurrent_warning_message_ind = Some(ConcurrentWarningMessageInd::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                141 => {
                    warning_area_coordinates =
                        Some(WarningAreaCoordinates::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let message_identifier = message_identifier.ok_or(DecodeError::InvalidChoice)?;
        let serial_number = serial_number.ok_or(DecodeError::InvalidChoice)?;
        let repetition_period = repetition_period.ok_or(DecodeError::InvalidChoice)?;
        let number_of_broadcasts_requested =
            number_of_broadcasts_requested.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            message_identifier,
            serial_number,
            warning_area_list,
            repetition_period,
            number_of_broadcasts_requested,
            warning_type,
            warning_security_info,
            data_coding_scheme,
            warning_message_contents,
            concurrent_warning_message_ind,
            warning_area_coordinates,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.warning_area_list.is_some(),
            self.warning_type.is_some(),
            self.warning_security_info.is_some(),
            self.data_coding_scheme.is_some(),
            self.warning_message_contents.is_some(),
            self.concurrent_warning_message_ind.is_some(),
            self.warning_area_coordinates.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (35 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.message_identifier.to_aper(enc, UNCONSTRAINED)?;
        (95 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.serial_number.to_aper(enc, UNCONSTRAINED)?;
        (87 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.repetition_period.to_aper(enc, UNCONSTRAINED)?;
        (47 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.number_of_broadcasts_requested
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.warning_area_list {
            (122 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.warning_type {
            (125 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.warning_security_info {
            (124 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.data_coding_scheme {
            (20 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.warning_message_contents {
            (123 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.concurrent_warning_message_ind {
            (17 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.warning_area_coordinates {
            (141 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// WriteReplaceWarningResponse
#[derive(Clone)]
pub struct WriteReplaceWarningResponse {
    pub message_identifier: MessageIdentifier,
    pub serial_number: SerialNumber,
    pub broadcast_completed_area_list: Option<BroadcastCompletedAreaList>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for WriteReplaceWarningResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut message_identifier: Option<MessageIdentifier> = None;
        let mut serial_number: Option<SerialNumber> = None;
        let mut broadcast_completed_area_list: Option<BroadcastCompletedAreaList> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                35 => {
                    message_identifier =
                        Some(MessageIdentifier::from_aper(decoder, UNCONSTRAINED)?);
                }
                95 => {
                    serial_number = Some(SerialNumber::from_aper(decoder, UNCONSTRAINED)?);
                }
                13 => {
                    broadcast_completed_area_list = Some(BroadcastCompletedAreaList::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let message_identifier = message_identifier.ok_or(DecodeError::InvalidChoice)?;
        let serial_number = serial_number.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            message_identifier,
            serial_number,
            broadcast_completed_area_list,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.broadcast_completed_area_list.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (35 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.message_identifier.to_aper(enc, UNCONSTRAINED)?;
        (95 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.serial_number.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.broadcast_completed_area_list {
            (13 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PwsCancelRequest
#[derive(Clone)]
pub struct PwsCancelRequest {
    pub message_identifier: MessageIdentifier,
    pub serial_number: SerialNumber,
    pub warning_area_list: Option<WarningAreaList>,
    pub cancel_all_warning_messages: Option<CancelAllWarningMessages>,
}

impl APerElement for PwsCancelRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut message_identifier: Option<MessageIdentifier> = None;
        let mut serial_number: Option<SerialNumber> = None;
        let mut warning_area_list: Option<WarningAreaList> = None;
        let mut cancel_all_warning_messages: Option<CancelAllWarningMessages> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                35 => {
                    message_identifier =
                        Some(MessageIdentifier::from_aper(decoder, UNCONSTRAINED)?);
                }
                95 => {
                    serial_number = Some(SerialNumber::from_aper(decoder, UNCONSTRAINED)?);
                }
                122 => {
                    warning_area_list = Some(WarningAreaList::from_aper(decoder, UNCONSTRAINED)?);
                }
                14 => {
                    cancel_all_warning_messages =
                        Some(CancelAllWarningMessages::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let message_identifier = message_identifier.ok_or(DecodeError::InvalidChoice)?;
        let serial_number = serial_number.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            message_identifier,
            serial_number,
            warning_area_list,
            cancel_all_warning_messages,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.warning_area_list.is_some(),
            self.cancel_all_warning_messages.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (35 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.message_identifier.to_aper(enc, UNCONSTRAINED)?;
        (95 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.serial_number.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.warning_area_list {
            (122 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.cancel_all_warning_messages {
            (14 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PwsCancelResponse
#[derive(Clone)]
pub struct PwsCancelResponse {
    pub message_identifier: MessageIdentifier,
    pub serial_number: SerialNumber,
    pub broadcast_cancelled_area_list: Option<BroadcastCancelledAreaList>,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for PwsCancelResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut message_identifier: Option<MessageIdentifier> = None;
        let mut serial_number: Option<SerialNumber> = None;
        let mut broadcast_cancelled_area_list: Option<BroadcastCancelledAreaList> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                35 => {
                    message_identifier =
                        Some(MessageIdentifier::from_aper(decoder, UNCONSTRAINED)?);
                }
                95 => {
                    serial_number = Some(SerialNumber::from_aper(decoder, UNCONSTRAINED)?);
                }
                12 => {
                    broadcast_cancelled_area_list = Some(BroadcastCancelledAreaList::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let message_identifier = message_identifier.ok_or(DecodeError::InvalidChoice)?;
        let serial_number = serial_number.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            message_identifier,
            serial_number,
            broadcast_cancelled_area_list,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.broadcast_cancelled_area_list.is_some(),
            self.criticality_diagnostics.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (35 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.message_identifier.to_aper(enc, UNCONSTRAINED)?;
        (95 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.serial_number.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.broadcast_cancelled_area_list {
            (12 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PwsRestartIndication
#[derive(Clone)]
pub struct PwsRestartIndication {
    pub cell_id_list_for_restart: CellIdListForRestart,
    pub global_ran_node_id: GlobalRanNodeId,
    pub tai_list_for_restart: TaiListForRestart,
    pub emergency_area_id_list_for_restart: Option<EmergencyAreaIdListForRestart>,
}

impl APerElement for PwsRestartIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut cell_id_list_for_restart: Option<CellIdListForRestart> = None;
        let mut global_ran_node_id: Option<GlobalRanNodeId> = None;
        let mut tai_list_for_restart: Option<TaiListForRestart> = None;
        let mut emergency_area_id_list_for_restart: Option<EmergencyAreaIdListForRestart> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                16 => {
                    cell_id_list_for_restart =
                        Some(CellIdListForRestart::from_aper(decoder, UNCONSTRAINED)?);
                }
                27 => {
                    global_ran_node_id = Some(GlobalRanNodeId::from_aper(decoder, UNCONSTRAINED)?);
                }
                104 => {
                    tai_list_for_restart =
                        Some(TaiListForRestart::from_aper(decoder, UNCONSTRAINED)?);
                }
                23 => {
                    emergency_area_id_list_for_restart = Some(
                        EmergencyAreaIdListForRestart::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let cell_id_list_for_restart =
            cell_id_list_for_restart.ok_or(DecodeError::InvalidChoice)?;
        let global_ran_node_id = global_ran_node_id.ok_or(DecodeError::InvalidChoice)?;
        let tai_list_for_restart = tai_list_for_restart.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            cell_id_list_for_restart,
            global_ran_node_id,
            tai_list_for_restart,
            emergency_area_id_list_for_restart,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.emergency_area_id_list_for_restart.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (16 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.cell_id_list_for_restart.to_aper(enc, UNCONSTRAINED)?;
        (27 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.global_ran_node_id.to_aper(enc, UNCONSTRAINED)?;
        (104 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.tai_list_for_restart.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.emergency_area_id_list_for_restart {
            (23 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PwsFailureIndication
#[derive(Clone)]
pub struct PwsFailureIndication {
    pub pws_failed_cell_id_list: PwsFailedCellIdList,
    pub global_ran_node_id: GlobalRanNodeId,
}

impl APerElement for PwsFailureIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut pws_failed_cell_id_list: Option<PwsFailedCellIdList> = None;
        let mut global_ran_node_id: Option<GlobalRanNodeId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                81 => {
                    pws_failed_cell_id_list =
                        Some(PwsFailedCellIdList::from_aper(decoder, UNCONSTRAINED)?);
                }
                27 => {
                    global_ran_node_id = Some(GlobalRanNodeId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let pws_failed_cell_id_list = pws_failed_cell_id_list.ok_or(DecodeError::InvalidChoice)?;
        let global_ran_node_id = global_ran_node_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            pws_failed_cell_id_list,
            global_ran_node_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (81 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.pws_failed_cell_id_list.to_aper(enc, UNCONSTRAINED)?;
        (27 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.global_ran_node_id.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// DownlinkUeAssociatedNrpPaTransport
#[derive(Clone)]
pub struct DownlinkUeAssociatedNrpPaTransport {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub routing_id: RoutingId,
    pub nrp_pa_pdu: NrpPaPdu,
}

impl APerElement for DownlinkUeAssociatedNrpPaTransport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut routing_id: Option<RoutingId> = None;
        let mut nrp_pa_pdu: Option<NrpPaPdu> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                89 => {
                    routing_id = Some(RoutingId::from_aper(decoder, UNCONSTRAINED)?);
                }
                46 => {
                    nrp_pa_pdu = Some(NrpPaPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let routing_id = routing_id.ok_or(DecodeError::InvalidChoice)?;
        let nrp_pa_pdu = nrp_pa_pdu.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            routing_id,
            nrp_pa_pdu,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (89 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.routing_id.to_aper(enc, UNCONSTRAINED)?;
        (46 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.nrp_pa_pdu.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UplinkUeAssociatedNrpPaTransport
#[derive(Clone)]
pub struct UplinkUeAssociatedNrpPaTransport {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub routing_id: RoutingId,
    pub nrp_pa_pdu: NrpPaPdu,
}

impl APerElement for UplinkUeAssociatedNrpPaTransport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut routing_id: Option<RoutingId> = None;
        let mut nrp_pa_pdu: Option<NrpPaPdu> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                89 => {
                    routing_id = Some(RoutingId::from_aper(decoder, UNCONSTRAINED)?);
                }
                46 => {
                    nrp_pa_pdu = Some(NrpPaPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let routing_id = routing_id.ok_or(DecodeError::InvalidChoice)?;
        let nrp_pa_pdu = nrp_pa_pdu.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            routing_id,
            nrp_pa_pdu,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (89 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.routing_id.to_aper(enc, UNCONSTRAINED)?;
        (46 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.nrp_pa_pdu.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// DownlinkNonUeAssociatedNrpPaTransport
#[derive(Clone)]
pub struct DownlinkNonUeAssociatedNrpPaTransport {
    pub routing_id: RoutingId,
    pub nrp_pa_pdu: NrpPaPdu,
}

impl APerElement for DownlinkNonUeAssociatedNrpPaTransport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut routing_id: Option<RoutingId> = None;
        let mut nrp_pa_pdu: Option<NrpPaPdu> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                89 => {
                    routing_id = Some(RoutingId::from_aper(decoder, UNCONSTRAINED)?);
                }
                46 => {
                    nrp_pa_pdu = Some(NrpPaPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let routing_id = routing_id.ok_or(DecodeError::InvalidChoice)?;
        let nrp_pa_pdu = nrp_pa_pdu.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            routing_id,
            nrp_pa_pdu,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (89 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.routing_id.to_aper(enc, UNCONSTRAINED)?;
        (46 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.nrp_pa_pdu.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UplinkNonUeAssociatedNrpPaTransport
#[derive(Clone)]
pub struct UplinkNonUeAssociatedNrpPaTransport {
    pub routing_id: RoutingId,
    pub nrp_pa_pdu: NrpPaPdu,
}

impl APerElement for UplinkNonUeAssociatedNrpPaTransport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut routing_id: Option<RoutingId> = None;
        let mut nrp_pa_pdu: Option<NrpPaPdu> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                89 => {
                    routing_id = Some(RoutingId::from_aper(decoder, UNCONSTRAINED)?);
                }
                46 => {
                    nrp_pa_pdu = Some(NrpPaPdu::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let routing_id = routing_id.ok_or(DecodeError::InvalidChoice)?;
        let nrp_pa_pdu = nrp_pa_pdu.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            routing_id,
            nrp_pa_pdu,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (89 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.routing_id.to_aper(enc, UNCONSTRAINED)?;
        (46 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.nrp_pa_pdu.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// TraceStart
#[derive(Clone)]
pub struct TraceStart {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub trace_activation: TraceActivation,
}

impl APerElement for TraceStart {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut trace_activation: Option<TraceActivation> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                108 => {
                    trace_activation = Some(TraceActivation::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let trace_activation = trace_activation.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            trace_activation,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (108 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.trace_activation.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// TraceFailureIndication
#[derive(Clone)]
pub struct TraceFailureIndication {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ngran_trace_id: NgranTraceId,
    pub cause: Cause,
}

impl APerElement for TraceFailureIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ngran_trace_id: Option<NgranTraceId> = None;
        let mut cause: Option<Cause> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                44 => {
                    ngran_trace_id = Some(NgranTraceId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ngran_trace_id = ngran_trace_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ngran_trace_id,
            cause,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (44 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ngran_trace_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// DeactivateTrace
#[derive(Clone)]
pub struct DeactivateTrace {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ngran_trace_id: NgranTraceId,
}

impl APerElement for DeactivateTrace {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ngran_trace_id: Option<NgranTraceId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                44 => {
                    ngran_trace_id = Some(NgranTraceId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ngran_trace_id = ngran_trace_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ngran_trace_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (44 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ngran_trace_id.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// CellTrafficTrace
#[derive(Clone)]
pub struct CellTrafficTrace {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ngran_trace_id: NgranTraceId,
    pub ngran_cgi: NgranCgi,
    pub trace_collection_entity_ip_address: TransportLayerAddress,
    pub privacy_indicator: Option<PrivacyIndicator>,
    pub trace_collection_entity_uri: Option<UriAddress>,
}

impl APerElement for CellTrafficTrace {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ngran_trace_id: Option<NgranTraceId> = None;
        let mut ngran_cgi: Option<NgranCgi> = None;
        let mut trace_collection_entity_ip_address: Option<TransportLayerAddress> = None;
        let mut privacy_indicator: Option<PrivacyIndicator> = None;
        let mut trace_collection_entity_uri: Option<UriAddress> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                44 => {
                    ngran_trace_id = Some(NgranTraceId::from_aper(decoder, UNCONSTRAINED)?);
                }
                43 => {
                    ngran_cgi = Some(NgranCgi::from_aper(decoder, UNCONSTRAINED)?);
                }
                109 => {
                    trace_collection_entity_ip_address =
                        Some(TransportLayerAddress::from_aper(decoder, UNCONSTRAINED)?);
                }
                256 => {
                    privacy_indicator = Some(PrivacyIndicator::from_aper(decoder, UNCONSTRAINED)?);
                }
                257 => {
                    trace_collection_entity_uri =
                        Some(UriAddress::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ngran_trace_id = ngran_trace_id.ok_or(DecodeError::InvalidChoice)?;
        let ngran_cgi = ngran_cgi.ok_or(DecodeError::InvalidChoice)?;
        let trace_collection_entity_ip_address =
            trace_collection_entity_ip_address.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ngran_trace_id,
            ngran_cgi,
            trace_collection_entity_ip_address,
            privacy_indicator,
            trace_collection_entity_uri,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.privacy_indicator.is_some(),
            self.trace_collection_entity_uri.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (44 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ngran_trace_id.to_aper(enc, UNCONSTRAINED)?;
        (43 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ngran_cgi.to_aper(enc, UNCONSTRAINED)?;
        (109 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.trace_collection_entity_ip_address
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.privacy_indicator {
            (256 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.trace_collection_entity_uri {
            (257 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// LocationReportingControl
#[derive(Clone)]
pub struct LocationReportingControl {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub location_reporting_request_type: LocationReportingRequestType,
}

impl APerElement for LocationReportingControl {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut location_reporting_request_type: Option<LocationReportingRequestType> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                33 => {
                    location_reporting_request_type = Some(
                        LocationReportingRequestType::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let location_reporting_request_type =
            location_reporting_request_type.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            location_reporting_request_type,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (33 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.location_reporting_request_type
            .to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// LocationReportingFailureIndication
#[derive(Clone)]
pub struct LocationReportingFailureIndication {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub cause: Cause,
}

impl APerElement for LocationReportingFailureIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut cause: Option<Cause> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                15 => {
                    cause = Some(Cause::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let cause = cause.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            cause,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (15 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.cause.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// LocationReport
#[derive(Clone)]
pub struct LocationReport {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub user_location_information: UserLocationInformation,
    pub ue_presence_in_area_of_interest_list: Option<UePresenceInAreaOfInterestList>,
    pub location_reporting_request_type: LocationReportingRequestType,
}

impl APerElement for LocationReport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;
        let mut ue_presence_in_area_of_interest_list: Option<UePresenceInAreaOfInterestList> = None;
        let mut location_reporting_request_type: Option<LocationReportingRequestType> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                116 => {
                    ue_presence_in_area_of_interest_list = Some(
                        UePresenceInAreaOfInterestList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                33 => {
                    location_reporting_request_type = Some(
                        LocationReportingRequestType::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let user_location_information =
            user_location_information.ok_or(DecodeError::InvalidChoice)?;
        let location_reporting_request_type =
            location_reporting_request_type.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            user_location_information,
            ue_presence_in_area_of_interest_list,
            location_reporting_request_type,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.ue_presence_in_area_of_interest_list.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (121 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.user_location_information.to_aper(enc, UNCONSTRAINED)?;
        (33 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.location_reporting_request_type
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ue_presence_in_area_of_interest_list {
            (116 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UetnlaBindingReleaseRequest
#[derive(Clone)]
pub struct UetnlaBindingReleaseRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
}

impl APerElement for UetnlaBindingReleaseRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UeRadioCapabilityInfoIndication
#[derive(Clone)]
pub struct UeRadioCapabilityInfoIndication {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ue_radio_capability: UeRadioCapability,
    pub ue_radio_capability_for_paging: Option<UeRadioCapabilityForPaging>,
    pub ue_radio_capability_eutra_format: Option<UeRadioCapability>,
}

impl APerElement for UeRadioCapabilityInfoIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ue_radio_capability: Option<UeRadioCapability> = None;
        let mut ue_radio_capability_for_paging: Option<UeRadioCapabilityForPaging> = None;
        let mut ue_radio_capability_eutra_format: Option<UeRadioCapability> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                117 => {
                    ue_radio_capability =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                118 => {
                    ue_radio_capability_for_paging = Some(UeRadioCapabilityForPaging::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                265 => {
                    ue_radio_capability_eutra_format =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ue_radio_capability = ue_radio_capability.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ue_radio_capability,
            ue_radio_capability_for_paging,
            ue_radio_capability_eutra_format,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ue_radio_capability_for_paging.is_some(),
            self.ue_radio_capability_eutra_format.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (117 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ue_radio_capability.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ue_radio_capability_for_paging {
            (118 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_eutra_format {
            (265 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeRadioCapabilityCheckRequest
#[derive(Clone)]
pub struct UeRadioCapabilityCheckRequest {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ue_radio_capability: Option<UeRadioCapability>,
    pub ue_radio_capability_id: Option<UeRadioCapabilityId>,
}

impl APerElement for UeRadioCapabilityCheckRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ue_radio_capability: Option<UeRadioCapability> = None;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                117 => {
                    ue_radio_capability =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ue_radio_capability,
            ue_radio_capability_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ue_radio_capability.is_some(),
            self.ue_radio_capability_id.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ue_radio_capability {
            (117 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_id {
            (264 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeRadioCapabilityCheckResponse
#[derive(Clone)]
pub struct UeRadioCapabilityCheckResponse {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ims_voice_support_indicator: ImsVoiceSupportIndicator,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeRadioCapabilityCheckResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ims_voice_support_indicator: Option<ImsVoiceSupportIndicator> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                30 => {
                    ims_voice_support_indicator =
                        Some(ImsVoiceSupportIndicator::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ims_voice_support_indicator =
            ims_voice_support_indicator.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ims_voice_support_indicator,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (30 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ims_voice_support_indicator
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// PrivateMessage - omitted

// SecondaryRatDataUsageReport
#[derive(Clone)]
pub struct SecondaryRatDataUsageReport {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub pdu_session_resource_secondary_rat_usage_list: PduSessionResourceSecondaryRatUsageList,
    pub handover_flag: Option<HandoverFlag>,
    pub user_location_information: Option<UserLocationInformation>,
}

impl APerElement for SecondaryRatDataUsageReport {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut pdu_session_resource_secondary_rat_usage_list: Option<
            PduSessionResourceSecondaryRatUsageList,
        > = None;
        let mut handover_flag: Option<HandoverFlag> = None;
        let mut user_location_information: Option<UserLocationInformation> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                142 => {
                    pdu_session_resource_secondary_rat_usage_list = Some(
                        PduSessionResourceSecondaryRatUsageList::from_aper(decoder, UNCONSTRAINED)?,
                    );
                }
                143 => {
                    handover_flag = Some(HandoverFlag::from_aper(decoder, UNCONSTRAINED)?);
                }
                121 => {
                    user_location_information =
                        Some(UserLocationInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let pdu_session_resource_secondary_rat_usage_list =
            pdu_session_resource_secondary_rat_usage_list.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            pdu_session_resource_secondary_rat_usage_list,
            handover_flag,
            user_location_information,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.handover_flag.is_some(),
            self.user_location_information.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (142 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.pdu_session_resource_secondary_rat_usage_list
            .to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.handover_flag {
            (143 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.user_location_information {
            (121 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UplinkRimInformationTransfer
#[derive(Clone)]
pub struct UplinkRimInformationTransfer {
    pub rim_information_transfer: Option<RimInformationTransfer>,
}

impl APerElement for UplinkRimInformationTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut rim_information_transfer: Option<RimInformationTransfer> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                175 => {
                    rim_information_transfer =
                        Some(RimInformationTransfer::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            rim_information_transfer,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.rim_information_transfer.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.rim_information_transfer {
            (175 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// DownlinkRimInformationTransfer
#[derive(Clone)]
pub struct DownlinkRimInformationTransfer {
    pub rim_information_transfer: Option<RimInformationTransfer>,
}

impl APerElement for DownlinkRimInformationTransfer {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut rim_information_transfer: Option<RimInformationTransfer> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                175 => {
                    rim_information_transfer =
                        Some(RimInformationTransfer::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        Ok(Self {
            rim_information_transfer,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.rim_information_transfer.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        if let Some(x) = &self.rim_information_transfer {
            (175 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// ConnectionEstablishmentIndication
#[derive(Clone)]
pub struct ConnectionEstablishmentIndication {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub ue_radio_capability: Option<UeRadioCapability>,
    pub end_indication: Option<EndIndication>,
    pub s_nssai: Option<SNssai>,
    pub allowed_nssai: Option<AllowedNssai>,
    pub ue_differentiation_info: Option<UeDifferentiationInfo>,
    pub dl_cp_security_information: Option<DlCpSecurityInformation>,
    pub nb_iot_ue_priority: Option<NbIotUePriority>,
    pub enhanced_coverage_restriction: Option<EnhancedCoverageRestriction>,
    pub c_emode_brestricted: Option<CEmodeBrestricted>,
    pub ue_radio_capability_id: Option<UeRadioCapabilityId>,
}

impl APerElement for ConnectionEstablishmentIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut ue_radio_capability: Option<UeRadioCapability> = None;
        let mut end_indication: Option<EndIndication> = None;
        let mut s_nssai: Option<SNssai> = None;
        let mut allowed_nssai: Option<AllowedNssai> = None;
        let mut ue_differentiation_info: Option<UeDifferentiationInfo> = None;
        let mut dl_cp_security_information: Option<DlCpSecurityInformation> = None;
        let mut nb_iot_ue_priority: Option<NbIotUePriority> = None;
        let mut enhanced_coverage_restriction: Option<EnhancedCoverageRestriction> = None;
        let mut c_emode_brestricted: Option<CEmodeBrestricted> = None;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                117 => {
                    ue_radio_capability =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                226 => {
                    end_indication = Some(EndIndication::from_aper(decoder, UNCONSTRAINED)?);
                }
                148 => {
                    s_nssai = Some(SNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                209 => {
                    ue_differentiation_info =
                        Some(UeDifferentiationInfo::from_aper(decoder, UNCONSTRAINED)?);
                }
                212 => {
                    dl_cp_security_information =
                        Some(DlCpSecurityInformation::from_aper(decoder, UNCONSTRAINED)?);
                }
                210 => {
                    nb_iot_ue_priority = Some(NbIotUePriority::from_aper(decoder, UNCONSTRAINED)?);
                }
                205 => {
                    enhanced_coverage_restriction = Some(EnhancedCoverageRestriction::from_aper(
                        decoder,
                        UNCONSTRAINED,
                    )?);
                }
                222 => {
                    c_emode_brestricted =
                        Some(CEmodeBrestricted::from_aper(decoder, UNCONSTRAINED)?);
                }
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            ue_radio_capability,
            end_indication,
            s_nssai,
            allowed_nssai,
            ue_differentiation_info,
            dl_cp_security_information,
            nb_iot_ue_priority,
            enhanced_coverage_restriction,
            c_emode_brestricted,
            ue_radio_capability_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [
            self.ue_radio_capability.is_some(),
            self.end_indication.is_some(),
            self.s_nssai.is_some(),
            self.allowed_nssai.is_some(),
            self.ue_differentiation_info.is_some(),
            self.dl_cp_security_information.is_some(),
            self.nb_iot_ue_priority.is_some(),
            self.enhanced_coverage_restriction.is_some(),
            self.c_emode_brestricted.is_some(),
            self.ue_radio_capability_id.is_some(),
        ]
        .iter()
        .filter(|&x| *x)
        .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.ue_radio_capability {
            (117 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.end_indication {
            (226 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.s_nssai {
            (148 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.allowed_nssai {
            (0 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_differentiation_info {
            (209 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.dl_cp_security_information {
            (212 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.nb_iot_ue_priority {
            (210 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.enhanced_coverage_restriction {
            (205 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.c_emode_brestricted {
            (222 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.ue_radio_capability_id {
            (264 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// UeRadioCapabilityIdMappingRequest
#[derive(Clone)]
pub struct UeRadioCapabilityIdMappingRequest {
    pub ue_radio_capability_id: UeRadioCapabilityId,
}

impl APerElement for UeRadioCapabilityIdMappingRequest {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ue_radio_capability_id = ue_radio_capability_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ue_radio_capability_id,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [].iter().filter(|&x| *x).count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (264 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ue_radio_capability_id.to_aper(enc, UNCONSTRAINED)?;

        Ok(())
    }
}

// UeRadioCapabilityIdMappingResponse
#[derive(Clone)]
pub struct UeRadioCapabilityIdMappingResponse {
    pub ue_radio_capability_id: UeRadioCapabilityId,
    pub ue_radio_capability: UeRadioCapability,
    pub criticality_diagnostics: Option<CriticalityDiagnostics>,
}

impl APerElement for UeRadioCapabilityIdMappingResponse {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut ue_radio_capability_id: Option<UeRadioCapabilityId> = None;
        let mut ue_radio_capability: Option<UeRadioCapability> = None;
        let mut criticality_diagnostics: Option<CriticalityDiagnostics> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                264 => {
                    ue_radio_capability_id =
                        Some(UeRadioCapabilityId::from_aper(decoder, UNCONSTRAINED)?);
                }
                117 => {
                    ue_radio_capability =
                        Some(UeRadioCapability::from_aper(decoder, UNCONSTRAINED)?);
                }
                19 => {
                    criticality_diagnostics =
                        Some(CriticalityDiagnostics::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let ue_radio_capability_id = ue_radio_capability_id.ok_or(DecodeError::InvalidChoice)?;
        let ue_radio_capability = ue_radio_capability.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            ue_radio_capability_id,
            ue_radio_capability,
            criticality_diagnostics,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.criticality_diagnostics.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (264 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ue_radio_capability_id.to_aper(enc, UNCONSTRAINED)?;
        (117 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
        self.ue_radio_capability.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.criticality_diagnostics {
            (19 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}

// AmfcpRelocationIndication
#[derive(Clone)]
pub struct AmfcpRelocationIndication {
    pub amf_ue_ngap_id: AmfUeNgapId,
    pub ran_ue_ngap_id: RanUeNgapId,
    pub s_nssai: Option<SNssai>,
    pub allowed_nssai: Option<AllowedNssai>,
}

impl APerElement for AmfcpRelocationIndication {
    fn from_aper(decoder: &mut Decoder, _constraints: Constraints) -> Result<Self, DecodeError> {
        if bool::from_aper(decoder, UNCONSTRAINED)? {
            return Err(DecodeError::NotImplemented);
        }
        let len = decoder.decode_length()?;
        let mut amf_ue_ngap_id: Option<AmfUeNgapId> = None;
        let mut ran_ue_ngap_id: Option<RanUeNgapId> = None;
        let mut s_nssai: Option<SNssai> = None;
        let mut allowed_nssai: Option<AllowedNssai> = None;

        for _ in 0..len {
            let id = u16::from_aper(decoder, UNCONSTRAINED)?;
            let criticality = Criticality::from_aper(decoder, UNCONSTRAINED)?;
            match id {
                10 => {
                    amf_ue_ngap_id = Some(AmfUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                85 => {
                    ran_ue_ngap_id = Some(RanUeNgapId::from_aper(decoder, UNCONSTRAINED)?);
                }
                148 => {
                    s_nssai = Some(SNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                0 => {
                    allowed_nssai = Some(AllowedNssai::from_aper(decoder, UNCONSTRAINED)?);
                }
                _ => {
                    if let Criticality::Reject = criticality {
                        return Err(DecodeError::InvalidChoice);
                    }
                }
            }
        }
        let amf_ue_ngap_id = amf_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        let ran_ue_ngap_id = ran_ue_ngap_id.ok_or(DecodeError::InvalidChoice)?;
        Ok(Self {
            amf_ue_ngap_id,
            ran_ue_ngap_id,
            s_nssai,
            allowed_nssai,
        })
    }
    fn to_aper(&self, enc: &mut Encoding, _constraints: Constraints) -> Result<(), EncodeError> {
        let num_ies = [self.s_nssai.is_some(), self.allowed_nssai.is_some()]
            .iter()
            .filter(|&x| *x)
            .count();

        false.to_aper(enc, UNCONSTRAINED)?;
        enc.append(&encode_length(num_ies)?)?;
        (10 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.amf_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        (85 as u16).to_aper(enc, UNCONSTRAINED)?;
        Criticality::Reject.to_aper(enc, UNCONSTRAINED)?;
        self.ran_ue_ngap_id.to_aper(enc, UNCONSTRAINED)?;
        if let Some(x) = &self.s_nssai {
            (148 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }
        if let Some(x) = &self.allowed_nssai {
            (0 as u16).to_aper(enc, UNCONSTRAINED)?;
            Criticality::Ignore.to_aper(enc, UNCONSTRAINED)?;
            x.to_aper(enc, UNCONSTRAINED)?;
        }

        Ok(())
    }
}
