# TO DO
----PUBLICATION----
- Get approval to publish
- Rerun demo
- Review all readmes as seen on Github, esp front page and roadmap
- Set to public
----FUNCTION----
- Make values in NG Setup configurable rather than hard coded (Tac, Plmn Id, slices, etc)
- Generate RRC transaction IDs properly
- Handle -ve response to InitialContextSetupRequest with bad RAN UE ID
----MAINTAINABILITY----
- Remove slog from workflow module and use log methods on Workflow instead
- Ue logging level should be settable to allow warnings to show up.  UE context should appear in logs / be stored in Logger.
- Cleaner RRC interface in trait Gnbcu
- Enforce Rust docs (see .cargo/config commented out compiler option)
-----TESTS------
- Efficient monolithic GNB-DU + GNB-CU can be built without a F1AP Stack or TransportProvider
- Efficient monolithic GNB-CU-CP + GNB-CU-UP can be built without an E1AP Stack or TransportProvider
-----ASN.1 GENERATOR------
- Cope with extension marker being set
- Frunk transmogrify - awkward because of vecs, enums and bitstrings.
- Get rid of todo!() in top_pdu.rs and replace with a log
- Implement Rrc setuprelease
- Deduplicate inline definitions in RRC autogeneration
- Generate procedures for Rrc and make F1AP a RequestProvider.
- Move to latest version of specs
- Fix clippy
-----FREE5GC DEMO------
- free5GC demo can register 2 (N?) UEs
- GNB-CU-UP executable can be started in demo and performs E1 Setup with GNB-CU-CP
----REDIS----
- Don't create 1 Redis connection per access
- Intermittent failure of live redis test
- Live redis test returns ok after "# Failed listening on port 23491 (TCP), aborting."
- Redis live test should not create Redis dump.rdb
----SCTP----
- sock_opt.rs doesn't need to be a separate file
- Remodel SCTP API to follow the one in the webrtc-sctp crate.

# DONE
- Parallel registration of two UEs
- Get build working on Github
- Parallel tests
- Don't run live redis test by default
- PDU session resource setup - code review and tidy
- Break procedures into small functions
- NG Setup is in workflows but F1 and E1 Setup aren't
- Ints should be Copy rather than Clone (e.g. AmfUeNgapId)
- Registration sequence should not set up UE context in DU or invovle Rrc Reconfiguration
- SRB set to 0 or 1 and checking of that in Mock DU
- Add comments at top of files
- GNB-CU-CP serves E1 and supports E1 Setup
- Clean up Redis even if live redis test fails
- E1AP generation
- Update Amf Mock to support multiple Ues
- Registration of multiple UEs in FV
- Tidy code e.g. in procedures, GnbcuOps
- GNBDU-SIM should produce a clear error message if mongo is not started
- In demo, GNBDU SIM should not warn 'connection failed - will retry' on shutdown
- Get live test and demo working
- Store AMF UE Ngap Id on first downlink NAS transport
- Uplink and downlink NAS transfer should be in the procedures module
- Fix int coding bug
- Redis live test
- Single async fn / task that sends the Rrc Setup and waits for Rrc Setup Complete
- Fix failing test
- Code review (incl commented out code and TODOs) - gnbcu
- Redo roadmap
- In demo, gnbdu-sim has inconsistent message logging
- At end of demo, gnbcu panicked on Ctrl-C with 'not yet implemented'.  AMF was Ctrl-C'd first.  AMF logs indicate it is sending AMF Status Indication.  Crash is in ngap_gnb.rs.  Add an FV for this.
- Remove the weird TNLA 3, TNLA 53 IDs
- Three lines for each log sucks
- In demo, gnbcu logs strangely end with ">> UlRrcMessageTransfer".  Where's the uplink message?
- In demo, gnbcu logs saying UlRrcMessageTransfer should include (nas) 
- In demo, inconsistent debug log "Got Downlink Nas Transport - send RRC to UE via DU"
- In demo, downgrade log Accepted connection from Some(127.0.0.1:60313), since we already have an INFO log for that
- In demo, consider merging 'Accepted SCTP connection from 127.0.0.1:60313' and 'NGAP TNLA 3 established' into single INFO log
- In demo, inconsistent debug log "InitialUeMessage >"
- Write up reliable demo instructions starting with download of free5GC
- Add quickstart instructions and notes on current status to top readme
- Bump deps
- Move to consistent message logging
- Regression test integration covering same ground as live test with free5GC
- Pretty Ue initial context and move into separate modules
- Fix malformed CellGroupConfig issue seen in Wireshark in F1AP UEContextSetupResponse -- DUtoCURRCInformation, cellGroupConfig shown as <MISSING>
- Build go code using cargo build.
- Fix code that does match match
- Registration (23.502, figure 4.2.2.2-1) wrapped in UE Initial Access procedure (38.401, figure 8.1-1) working against free5GC as seen in ngap_setup.pcap.
- Go program that processes NAS information
- Encapsulate RRC in PDCP PDU
- gnbdu-sim
- RRC autogeneration
- Multi worker code (including coordinator) moved to a 'prototype' version leaving remaining code super simple
- NG Setup working again against free5GC using the instructions in [the free5gc howto](../howto/free5GC-testing.md).
- Add error messages to ASN.1 library + get it upstreamed
- GNB-CU code moved to a subdirectory (leaving code shared with DU or AMF at top level).
- Autogeneration of procedures etc
- Fix Address already in use warning seen in tests.  Refactor so that the listen() fails more obviously. 
- Test should fail if the F1AP SCTP bind fails 
- 'Worker confirms successul TNLA initialization' is output before output of AMF sending setup response
- send request instead of send pdu
- Test script as DU can send Setup and get response 
- Test script as DU can connect to CU
- Create callback client on coordinator
- Drive NG Setup from callback server
- Drive RAN configuration update from coordinator
- Start callback server on worker
- Develop callback in node control API.
- test the sctp receive function
- sort out TODOs and unwraps()
- commonize TNLA pool
- try out the Hampi library to decode the response at least?
- start fake amf
- get info / trace levels right
- get tests passing cleanly
- remove bindgen test cruft
- on startup, the worker should connect to node controller, get AMF address, connect
- fix typo refresh
- factor out logging and signal handling to common library
- treat that as a separate package within the same workspace for now
- create a basic POST API (later we add callback server)
- ok so we need to run OpenAPI generator
- Implement the node controller / investigate OpenAPI
- see if two alsorans can connect to one AMF
- documentation of features and level of testing
- socket OS errors getting hidden by anyhow
- Maintain + Retry 
- Successful NG Setup with Free5G.
- get rid of haphazard error conversion - see TODOs
- clean up sctp_association.rs
- Clippy
- send a fake ng setup and test the sctp receive function
- Properly close sockets when wrapper structs are dropped
- Stay up until Ctrl-C
- SCTP connect
- test against a free5GC
- add logging
- explore HA + use of SCTP.